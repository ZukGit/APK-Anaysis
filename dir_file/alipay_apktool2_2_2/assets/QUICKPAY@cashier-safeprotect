{"time":"0005","tplId":"QUICKPAY@cashier-safeprotect","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-safeprotect","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var hide=amc.fn.hide;var show=amc.fn.show;var getTag=amc.fn.getById;var rpc=amc.rpcData;var canSubmit=false;var scanflag=false;var cameraImgPath=amc.path+\"alipay_msp_icon_camera\";function resetIcon(){if(rpc.type===\"card\"&&(!rpc.submit_params.disable)){getTag(\"iconImg\").src=cameraImgPath;show(\"iconImg\")}else{hide(\"iconImg\")}}function resetButton(){getTag(\"submit\").disabled=!canSubmit}function checkInput(){var a=getTag(\"answer\").value;if(a.length>0){canSubmit=true;hide(\"iconImg\");formatBankNum()}else{resetIcon();canSubmit=false}scanflag=false;resetButton()}function formatBankNum(){if(rpc.type!==\"card\"){return}var a=getTag(\"answer\").value;a=a.replace(/(\\d{4})(?=\\d)/g,\"$1 \");a=a.trim();getTag(\"answer\").value=a||\"\"}function showCamera(){if(getTag(\"iconImg\").src!==cameraImgPath){return}document.asyncSubmit({action:{name:\"loc:scancard\"}},function(a){if(a.data){getTag(\"answer\").value=a.data;checkInput();scanflag=true}})}function submitInfo(){if(!canSubmit){return}getTag(\"answer\").blur();resetButton();var c={};c.action={name:rpc.submit_params.uri,loadtxt:\"\",host:rpc.host,https:true,apiVersion:\"1.0.0\",namespace:\"com.alipay.securitycore\",apiName:\"com.alipay.seccorepay\",params:{}};if(rpc.isCreditCard){c.action[\"enctype\"]=\"application/x-www-form-urlencoded\";c.action[\"request_param\"]=\"requestData\"}if(!rpc.host){c.action[\"https\"]=false}if(rpc.submit_params){c.action[\"params\"]=rpc.submit_params}var a=getTag(\"answer\").value;if(rpc.type===\"card\"){a=a.replace(/\\s+/g,\"\")}var b={answer:a};if(scanflag){b.scanflag=true}c.param=b;document.asyncSubmit(c,function(e){if(e.pageloading===undefined){if(e.status){var d=e.status.substr(-2);if(d===\"02\"){getTag(\"answer\").value=\"\";canSubmit=true}}checkInput()}amc.fn.shouldShowBtnIndicator(e,\"submit\",\"loading\")});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"loading\")}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var a=amc.fn.getNav(amc.res.navBack,\"{{return}}\",\"{{id_validate}}\",null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"mainBody\"));if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}resetButton();if(rpc.type===\"issue\"){getTag(\"tips\").innerText=\"{{safe_question}}\";getTag(\"answer\").placeholder=\"{{input_answer}}\"}else{if(rpc.type===\"card\"){getTag(\"tips\").innerText=\"{{safe_bank_no}}\";getTag(\"answer\").placeholder=\"{{bank_no}}\";getTag(\"answer\").type=\"num\"}else{if(rpc.type===\"identity\"){getTag(\"tips\").innerText=\"{{safe_id_card}}\";getTag(\"tipsBox\").style.cssText=\"padding-right:11px;\";getTag(\"answer\").placeholder=\"{{id_card_tail}}\"}}}if(rpc.question){getTag(\"question\").innerText=rpc.question||\"\"}resetIcon()}function onBack(){var a={message:\"{{confirm_exit}}\",okButton:\"{{confirm_btn}}\",cancelButton:\"{{cancel}}\"};document.confirm(a,function(b){if(b.ok){document.submit({action:{name:\"loc:exit\"}})}})}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".btn-text {\n    color: #d2d2d2;\n    font-weight: bold;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{"id":"tipsBox","tag":"div","children":[{"id":"tips","tag":"label","css":"amc-item-l-text amc-font-m amc-flex-1"}],"css":"amc-pd-lr"},{"tag":"div","css":"amc-abs-space-v-l"},{"tag":"div","children":[{"id":"question","tag":"label","css":"amc-text-center amc-font-xxl"}],"css":"amc-pd-lr amc-pd-b"},{"id":"inputBox","tag":"div","children":[{"tag":"div","children":[{"id":"answer","autofocus":"true","placeholder":"{{please_input}}","tag":"input","value":"","type":"text","css":"amc-input","oninput":"checkInput()"}],"css":"amc-cell-m-box"},{"id":"iconImg","tag":"img","onclick":"showCamera()"}],"css":"amc-cell amc-pd-lr"},{"tag":"div","css":"amc-abs-space-v-xs"},{"id":"btnContainer","tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"submit","tag":"button","children":[{"text":"{{confirm_btn}}","tag":"text"}],"onclick":"submitInfo()","css":"amc-btn-primary","disabled":"true"}],"css":"amc-margin amc-align-center amc-justify-center amc-btn-primary"}],"css":"amc-main"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.8"}