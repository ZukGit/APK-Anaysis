{"time":"0006","tplId":"QUICKPAY@open-auth-webbank-flex","publishVersion":"150924","tag":"QUICKPAY","name":"open-auth-webbank-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"script","src":"open-auth-webbank-flex.js"},{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var webbankPng=amc.path+\"alipay_msp_webbank\";var alipayPng=amc.path+\"alipay_msp_logo\";var mobileMask=amc.rpcData.hiddenLogonId||\"\";var spassWord=amc.rpcData.spasswordPay;var protocolURL=amc.rpcData.protocolURL||\"https://www.mybank.cn/protocal/interwork-new.html\";var accountLogin=false;if(mobileMask){accountLogin=true}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var a=amc.isAndroid?amc.res.navClose:null;var d=amc.isAndroid?null:\"{{cancel}}\";var b=amc.isAndroid?onBack:null;var c=amc.isAndroid?null:onBack;var e=amc.fn.getNav(a,null,\"{{account_bind}}\",d,null,b,c);getTag(\"body\").insertBefore(e,getTag(\"mainBody\"));if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}getTag(\"nextBtn\").disabled=true;getTag(\"webBank\").src=webbankPng;getTag(\"alipayLogo\").src=alipayPng;getTag(\"mobileMask\").style.maxWidth=window.innerWidth-130;getTag(\"bindTxt\").style.maxWidth=window.innerWidth-80;if(accountLogin){getTag(\"mobileMask\").innerText=mobileMask}else{getTag(\"mobileMask\").innerText=\"{{bind_webbank_account}}\";getTag(\"mobileMask\").style.maxWidth=window.innerWidth;getTag(\"mobileMask\").style.cssText=\"flex:1.0\";hide(\"changeBtn\")}initCheckBox();if(accountLogin){showPwd()}else{showLogin()}}function showLogin(){hide(\"pwdArea\");show(\"loginArea\")}function showPwd(){show(\"pwdArea\");hide(\"loginArea\");if(spassWord){show(\"spassword\");hide(\"password\");getTag(\"spwd\").focus()}else{hide(\"spassword\");show(\"password\");getTag(\"pwd\").focus()}}function onInput(){var c=getTag(\"account\");var b=getTag(\"paypass\");var a=getTag(\"nextBtn\");if(c.value.length>0&&b.value.length>0){a.disabled=false}else{a.disabled=true}}function onSpwdInput(){var a=getTag(\"spwd\");if(a.value.length>=6){getTag(\"nextBtn\").disabled=false}else{getTag(\"nextBtn\").disabled=true}}function onPwdInput(){var a=getTag(\"pwd\");if(a.value.length>0){getTag(\"nextBtn\").disabled=false}else{getTag(\"nextBtn\").disabled=true}}function onSubmit(){if(accountLogin){onPwdSubmit()}else{onLoginSubmit()}}function onLoginSubmit(){var d={};var b=getTag(\"account\");var a=getTag(\"paypass\");d.logon_id=b.value;d.ldc_logonId=b.value;d.pwd=a.value;d.encryptType=\"RSA\";d.check_pay_pwd=true;var c={};c.action={};c.action[\"name\"]=\"/bank/login\";c.action[\"loadtxt\"]=\"\";c.param=d;document.asyncSubmit(c,function(e){if(e.pageloading===undefined){a.value=\"\";onInput();a.focus()}else{amc.fn.shouldShowBtnIndicator(e,\"nextBtn\",\"loading\")}});a.blur();amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"nextBtn\",\"loading\")}function onPwdSubmit(){var d={};var c=getTag(\"spwd\");if(spassWord){var a=c.value;d.spwd=a}else{c=getTag(\"pwd\");d.pwd=c.value}d.encryptType=\"RSA\";var b={};b.param=d;b.action={};b.action[\"name\"]=\"/bank/login\";b.action[\"loadtxt\"]=\"\";document.asyncSubmit(b,function(e){if(e.pageloading===undefined){c.value=\"\";if(spassWord){onSpwdInput()}else{onPwdInput()}c.focus()}else{amc.fn.shouldShowBtnIndicator(e,\"nextBtn\",\"loading\")}});c.blur();amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"nextBtn\",\"loading\")}function openProtocol(){document.submit({action:{name:\"loc:openweb('\"+protocolURL+\"')\"}})}function initCheckBox(){var a=getTag(\"checkArea\");checkbox=amc.fn.create(\"img\");checkbox.src=amc.path+\"alipay_msp_checked\";checkbox.className=\"amc-check-img\";a.appendChild(checkbox)}function onSwitchAccount(){var a={action:{name:\"/cashier/switchAccount\"}};document.submit(a)}function onBack(){amc.fn.exitConfirm(\"{{confirm_exit}}\")}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".agree-label {\n    max-width: 100px;\n}\n.change-btn {\n    max-width: 100px;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{"tag":"div","children":[{"tag":"div","css":"amc-abs-space-v-s"},{"tag":"div","children":[{"id":"webBank","tag":"img","css":"open-auth-img"}],"css":"amc-pd-tb amc-justify-center"},{"tag":"div","children":[{"id":"logoTitle","tag":"label","children":[{"text":"{{webbank}}","tag":"text"}],"css":"amc-font-super amc-text-center amc-flex-1 amc-ellipsis-2-line"}]},{"tag":"div","css":"amc-abs-space-v-s"},{"tag":"div","children":[{"id":"alipayLogo","tag":"img","css":"auth-left-img"},{"id":"bindTxt","tag":"label","children":[{"text":"{{bind_alipay_account}}","tag":"text"}],"css":"amc-font-xl amc-light-color amc-ellipsis"}],"css":"amc-align-center amc-justify-center"},{"tag":"div","children":[{"id":"mobileMask","tag":"label","css":"amc-font-xl amc-text-light-color amc-margin-r-xs amc-text-center amc-ellipsis-2-line"},{"id":"changeBtn","tag":"label","children":[{"text":"{{sel}}","tag":"text"}],"onclick":"onSwitchAccount()","css":"amc-font-xl amc-theme-color amc-text-center amc-ellpsis change-btn"}],"css":"amc-justify-center amc-pd-lr amc-pd-t-s"},{"tag":"div","css":"amc-abs-space-v-l"}],"css":"amc-bg-white amc-v-box"},{"tag":"div","css":"amc-1px-line"},{},{"id":"pwdArea","tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{paypwd_bind}}","tag":"text"}],"css":"amc-font-xl  amc-flex-1 amc-ellipsis-2-line"}],"css":"amc-pd-t amc-justify-center"},{"id":"pwdBox","tag":"div","children":[{},{"id":"password","tag":"div","children":[{"tag":"div","children":[{},{"tag":"div","css":"amc-abs-space-h-m"},{"id":"pwd","placeholder":"{{alipaypwd}}","tag":"embed","value":"","src":"paypwd","type":"MQPPayPwdView","css":"amc-input amc-spwd-height","oninput":"onPwdInput()"}],"css":"amc-spwd-box"}]},{},{"id":"spassword","tag":"div","children":[{"tag":"div","children":[{"id":"spwd","tag":"embed","value":"","src":"payspwd","type":"MQPPayPwdView","css":"amc-pwd-input amc-spwd-height","oninput":"onSpwdInput()"}],"css":"amc-spwd-box"}]}],"css":"amc-v-box amc-pd-tb"}],"css":"amc-pd-lr amc-v-box"},{},{"id":"loginArea","style":"display:none","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{account}}","tag":"text"}],"css":"amc-font-xl amc-flex-1 amc-ellipsis-2-line"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"account","autofocus":"true","placeholder":"{{input_alipay_account}}","tag":"input","value":"","css":"amc-input","oninput":"onInput()"}],"css":"amc-cell-m-box"}],"css":"amc-cell amc-pd-lr"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{paypwd}}","tag":"text"}],"css":"amc-cell-l-text amc-flex-1 amc-ellipsis-2-line"}],"css":"amc-cell-l-box"},{"tag":"div","children":[{"id":"paypass","placeholder":"{{pay_n_loginpwd}}","tag":"embed","value":"","src":"paypwd","type":"MQPPayPwdView","css":"amc-input amc-pwd-height","oninput":"onInput()"}],"css":"amc-cell-m-box"}],"css":"amc-cell amc-pd-lr"}],"css":"amc-pd-tb amc-v-box full-width-box"},{"tag":"div","css":"amc-abs-space-h-l"},{"tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"nextBtn","tag":"button","children":[{"text":"{{next}}","tag":"text"}],"onclick":"onSubmit()","css":"amc-btn-primary amc-flex-1"}],"css":"amc-margin-lr full-width-box amc-btn-primary amc-align-center amc-justify-center"},{"tag":"div","children":[{"id":"checkArea","tag":"div","css":"amc-margin-r-xs amc-align-self-start"},{"tag":"label","children":[{"text":"{{read_agree}}","tag":"text"}],"css":"amc-margin-r-xs agree-label amc-ellipsis amc-align-self-start"},{"id":"protocol","tag":"label","children":[{"text":"{{alipay_agree}}","tag":"text"}],"onclick":"openProtocol()","css":"amc-theme-color amc-flex-1 amc-ellipsis-3-line amc-align-self-start"}],"css":"amc-pd amc-align-center"}],"css":"amc-v-box amc-flex-1 amc-scroll-android"}],"onkeydown":"onKeyDown()","css":"amc-body"}]},"format":"JSON","tplVersion":"5.0.8"}