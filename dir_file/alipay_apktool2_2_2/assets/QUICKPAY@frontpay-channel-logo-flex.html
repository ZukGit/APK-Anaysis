{"time":"0006","tplId":"QUICKPAY@frontpay-channel-logo-flex.html","publishVersion":"150924","tag":"QUICKPAY","name":"frontpay-channel-logo-flex.html","data":"<!DOCTYPE html>\n<html>\n\n<head>\n    <!-- 鸟巢 -->\n    <meta type=\"i18n\" />\n    <link href=\"https://amc201710.alipay.com/amc.css\" rel=\"stylesheet\" />\n    <script src=\"https://amc201710.alipay.com/amc.js\"></script>\n    <!-- 垫片 -->\n    <link href=\"https://amc201710.alipay.com/amc-h5-polyfill.css\" rel=\"stylesheet\" />\n    <script src=\"https://amc201710.alipay.com/amc-h5-polyfill.js\"></script>\n    <script>var getTag=amc.fn.getById;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var rpc=amc.rpcData;var processImg=amc.fn.processImageUrl;var createImg=amc.fn.createImg;var BANK_LOGO=amc.path+\"alipay_msp_bank_logo\";var gouPng=amc.path+\"alipay_msp_gou\";var addCardAction=\"/frontpay/newCard\";var nextAction=\"loc:returnData\";var helpQuery=rpc.helpQuery||\"\";var helpUrl=rpc.helpUrl||\"\";amc.fn.spmPageCreate(\"a283.b4037\",{scene:rpc.bizType===\"deposit\"?\"deposit\":\"front\"});function init(){try{initUI();MQPJSBridge.pageReadyNotify();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var d=rpc.setting?\"{{setting}}\":null;var a;if(rpc.showLogo){a=amc.path+\"alipay_msp_i_logo\"}var f=amc.fn.iNav(amc.res.close,rpc.title||\"{{sel_pay_tool}}\",null,amc.res.help,onClose,onHelp,a,rpc.subtitle);amc.fn.spmExposure(\"a283.b4037.c9697.d24459\");amc.fn.spmExposure(\"a283.b4037.c9697.d24460\");getTag(\"body\").insertBefore(f,getTag(\"iLine\"));getTag(\"iNavImgL\").className=\"image-close\";getTag(\"iNavImgR\")&&(getTag(\"iNavImgR\").alt=\"{{help}}\");getTag(\"iNavImgM\")&&(getTag(\"iNavImgM\").alt=\"{{alipay}}\");if(rpc.subScene===\"inside\"){getTag(\"body\").style.opacity=\"1\"}if(rpc.err){getTag(\"errMsgBox\").className+=\" error-msg-box\";getTag(\"errMsg\").innerText=rpc.err}else{if(rpc.tips){getTag(\"tipsBox\").className+=\" channel-tips-box\";getTag(\"tips\").innerText=rpc.tips}}if(rpc.bizType===\"deposit\"){addCardAction=\"loc:back;/setting/addCard\";nextAction=\"loc:back;/deposit/channelChoosed\"}var g=getTag(\"channel\");for(var b=0;b<rpc.channels.length;b++){createPaymentItem(g,rpc.channels[b],b)}var e=rpc.newCardChannel;if(e&&e.usable){var c={};c.new_card=true;c.usable=true;c.name=rpc.newCardChannel.name;c.tail=\"\";createPaymentItem(g,c,-1)}}function createPaymentItem(m,p,l){var n=create(\"div\",\"channel-item\");var k;if(p.new_card){p.usable=true;p.logo=amc.path+\"alipay_msp_add_card\"}var e=createImg(\"channel-logo\",n,BANK_LOGO,BANK_LOGO);if(p.logo){e.src=processImg(p.logo,24);if(!p.usable){e.style.cssText+=\"opacity:0.5\"}}var o=create(\"div\",\"amc-item-m-box\",n);var q=create(\"div\",\"amc-v-box amc-flex-1\",o);var c=create(\"div\",\"\",q);var f=create(\"label\",\"channel-name amc-ellipsis\",c);var g=Math.max(calculateFontWidth(p.tail)*16,62);if(p.new_card){f.style.maxWidth=window.innerWidth-96}else{f.style.maxWidth=window.innerWidth-96-g}f.innerText=p.name||\"\";var b=create(\"label\",\"channel-name amc-ellipsis\",c);b.style.maxWidth=g;b.innerText=p.tail||\"\";var a;var h=false;if(p.available){a=p.available_title;h=true}if(!p.usable){f.style.color=\"#777\";b.style.color=\"#777\";if(p.close_msg){a=p.close_msg}else{if(p.available_title){a=p.available_title}}h=true;n.disabled=true}else{n.onclick=function(){var t={action:{name:nextAction}};if(p.new_card){t.action[\"name\"]=addCardAction}else{if(rpc.bizType===\"deposit\"){t.action[\"name\"]=\"loc:reload;loc:back\"}}if(rpc.bizType===\"deposit\"){var v={};v.index=l;v.logo=(e&&e.src)||\"\";var u=p.value;if(u){v.limit=u.availableAmount||\"\";v.channel=u.assignedChannel||\"\";v.name=u.channelName;var r=u.cardInfo;if(r){v.tail=r.cardNo}t.param=v}document.submit(t)}else{t.action[\"loadtxt\"]=\"\";var s={};s.resultStatus=p.end_code;s.result=toString(p.value);s.memo=\"\";t.action[\"params\"]=s;document.asyncSubmit(t,function(w){if(w.pageloading===\"1\"){hide(d);show(k)}else{if(w.pageloading===\"0\"){hide(k);show(d)}}})}hide(d);show(k);amc.fn.spmExposure(\"a283.b4037.c9697.d17387\")};n.className+=\" amc-press-box\"}if(h){var j=create(\"label\",\"channel-detail amc-ellipsis-2-line\",q);j.innerText=a||\"\";if(p.close_msg&&p.detailAction){n.disabled=false;j.style.cssText=\"color:#777;flex:1.0;white-space:wrap;-webkit-flex:1.0;\";n.className+=\" cell-adjust\";setTimeout(function(){n.style.minHeight=j.offsetHeight+40},16);q.onclick=function(){var r={action:{name:p.detailAction,loadtxt:\"\"}};document.submit(r)}}}var d=create(\"img\",\"\",n);d.style.marginLeft=\"0px\";if(p.checked){d.src=gouPng;d.className=\"image-checked\"}if(p.new_card||p.type==\"appBank\"){d.src=amc.res.arrowRight;d.className=\"image-arrow-right\"}k=create(\"img\",\"indicatior-box amc-indicatior amc-hidden\",n);k.src=amc.path+\"alipay_msp_indicatior\";m.appendChild(n);var i=create(\"div\",\"\",m);create(\"div\",\"amc-1px-line amc-flex-1\",i);if(l<rpc.channels.length-1){i.className+=\" pd-l\"}}function onClose(){amc.fn.spmPageDestroy(\"a283.b4037\");amc.fn.spmClick(\"a283.b4037.c9697.d24459\");if(rpc.bizType===\"deposit\"){amc.fn.back()}else{amc.fn.exit()}}function onHelp(){var a=\"https://csmobile.alipay.com/router.htm?scene=app_paymentlist\";if(helpUrl){a=helpUrl}else{if(helpQuery){a=(helpQuery.indexOf(\"&\")===0)?a+helpQuery:a+\"&\"+helpQuery}}amc.fn.logCount(\"help\",\"front-chnl\");document.submit({action:{name:\"loc:openweb('\"+a+\"', '{{help}}')\"}});amc.fn.spmClick(\"a283.b4037.c9697.d24460\")}function onKeyDown(){if(event.which==4){onClose()}}function calculateFontWidth(d){if(!d){return 0}var b=0;var c=/^[A-Za-z0-9\\.\\(\\)]*$/;for(var a=0;a<d.length;a++){if(c.test(d[a])){b+=0.45}else{b++}}return Math.round(b)}function toString(a){if(a==undefined||a==null){return\"{}\"}if(typeof a==\"string\"){return a}else{if(typeof a==\"object\"){return JSON.stringify(a)}else{return a+\"\"}}};</script>\n    <style>\n        .indicatior-box {\n            width: 13px;\n            height: 13px;\n        }\n\n        .image-arrow-right {\n            width: 8px;\n            height: 13px;\n        }\n\n        .image-checked {\n            width: 13px;\n            height: 11px;\n        }\n\n        .image-close {\n            width: 14px;\n            height: 14.5px;\n        }\n\n        .channel-item {\n            align-items: center;\n            -webkit-align-items: center;\n            padding: 10px 15px;\n            min-height: 65px;\n        }\n\n        .error-msg-box {\n            background-color: #ffeeee;\n            padding-top: 12px;\n            display: block;\n            height: auto;\n            min-height: 0px;\n        }\n\n        .error-msg {\n            margin-left: 15px;\n            margin-right: 15px;\n            margin-bottom: 12px;\n            font-size: 14px;\n            color: #f4333c;\n            text-align: left;\n            overflow: hidden;\n        }\n\n        .pd-lr {\n            padding-left: 15px;\n            padding-right: 15px;\n        }\n\n        .channel-logo {\n            height: 24px;\n            width: 24px;\n            margin-right: 12px;\n        }\n\n        .channel-name {\n            font-size: 16px;\n            letter-spacing: 0px;\n            color: #000;\n\n            align-items: center;\n            -webkit-align-items: center;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n\n        .channel-detail {\n            margin-top: 3px;\n            font-size: 14px;\n            color: #777;\n        }\n\n        .cell-adjust {\n            padding: 12px 15px;\n            min-height: 70px;\n        }\n\n        .pd-l {\n            padding-left: 15px;\n        }\n\n        .channel-tips-box {\n            padding-top: 12px;\n            height: auto;\n            display: block;\n            min-height: 0px;\n            background-color: #f5f5f5;\n        }\n\n        .channel-tips {\n            margin-left: 15px;\n            margin-right: 15px;\n            margin-bottom: 12px;\n            font-size: 14px;\n            color: #666;\n            text-align: left;\n            overflow: hidden;\n        }\n\n        .channel-box {\n            display: block;\n            overflow: scroll;\n        }\n\n        ::-webkit-scrollbar {\n            display: none;\n        }\n    </style>\n</head>\n\n<body id=\"body\" class=\"amc-i-body\" onload=\"init();\" onkeydown=\"onKeyDown();\">\n    <div id=\"iLine\" class=\"amc-1px-title-line\"></div>\n    <div class=\"amc-v-box amc-scroll-flex\">\n        <div id=\"channel\" class=\"channel-box\">\n\n            <div id=\"errMsgBox\" class=\"amc-hidden\">\n                <div id=\"errMsg\" class=\"error-msg amc-ellipsis-2-line\"></div>\n                <div class=\"amc-adapt-line\"></div>\n            </div>\n\n            <div id=\"tipsBox\" class=\"amc-hidden\">\n                <div id=\"tips\" class=\"channel-tips amc-ellipsis-2-line\"></div>\n                <div class=\"amc-adapt-line\"></div>\n            </div>\n        </div>\n        <div class=\"pd-lr\">\n            <div class=\"amc-1px-line\"></div>\n        </div>\n        <div class=\"amc-iphone-x-pd-b\"></div>\n    </div>\n</body>\n\n</html>\n","format":"HTML","tplVersion":"5.3.1"}