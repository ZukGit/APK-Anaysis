{"time":"0015","tplId":"WALLET-SEARCH@Comment","publishVersion":"150603","tag":"WALLET-SEARCH","name":"Comment","data":{"tag":"html","children":[{"tag":"head","children":[{"content":"text/html; charset=UTF-8","tag":"meta","http-equiv":"Content-Type"},{"tag":"style","children":[{"text":".cell {\n            display: flex;\n            flex: 1;\n            background-color: #ffffff;\n            justify-content: flex-start;\n            padding: 12px 14px;\n            flex-direction: column;\n        }\n\n        .cell:active {\n            background-color: #e4e4e4;\n        }\n\n        .avator {\n            width: 24px;\n            height: 24px;\n        }\n\n        .name {\n            color: #888888;\n            font-size: 16px;\n            text-align: left;\n            height: 22px;\n            line-height: 22px;\n            margin-left: 12px;\n            overflow: hidden;\n            white-space: nowrap;;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n        }\n\n        .time {\n            color: #888888;\n            font-size: 14px;\n            text-align: left;\n            margin-left: 8px;\n            height: 22px;\n            line-height: 22px;\n            overflow: hidden;\n            white-space: nowrap;;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n        }\n\n        .row-item {\n            display: flex;\n            flex-direction: row;\n        }\n\n        .info {\n            flex: 1;\n            color: #888999;\n            font-size: 16px;\n            margin-left: 36px;\n            margin-top: 2px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            display: -webkit-box\n\n        }\n\n        .image-wrap {\n            flex: 1;\n            display: flex;\n            flex-direction: row;\n            margin-left: 36px;\n            margin-top: 4px;\n        }\n\n        .img-container {\n            flex-direction: row;\n            width: 60px;\n            height: 60px;\n            margin-right: 8px;\n        }\n\n        .img {\n            position: absolute;\n            width: 60px;\n            height: 60px;\n            background-color: #f5f5f9;\n\n            \n        }\n\n        .video-icon {\n            position: absolute;\n            margin: 17px;\n            height: 25px;\n            width: 25px;\n        }\n\n        .more-image-label {\n            width: 60px;\n            max-width: 60px;\n            padding-top: 20px;\n            padding-bottom: 20px;\n            text-align: center;\n            background-color: #f5f5f9;\n            font-size: 14px;\n            color: #888888;\n            overflow: hidden;\n            white-space: nowrap;;\n            text-overflow: ellipsis;\n            display: -webkit-box\n        }\n\n        .link-image {\n            width: 12px;\n            height: 12px;\n            margin-right: 4px;\n            margin-top: 4px;\n            display: flex;\n            \n        }\n\n        .link {\n            flex: 1;\n            color: #888888;\n            font-size: 14px;\n            text-align: left;\n            height: 22px;\n            line-height: 22px;\n            overflow: hidden;\n            white-space: nowrap;;\n            text-overflow: ellipsis;\n            display: -webkit-box\n        }\n\n        .list_line {\n            height: 1PX;\n            flex: 1;\n            background-color: #e0e0e0;\n            margin-left: 14px;\n        }","tag":"text"}],"type":"text/css"},{"tag":"script","children":[{"text":"var widthPadding = 14 + 14;\n        var widthImage = 60 + 8;\n        var widthTitlePadding = 8 + 60;\n\n        document.onreload = function (data) {\n            var imgInfo = document.getElementById(\"id_avator\");\n            var titleLabel = document.getElementById(\"id_name\");\n            var time = document.getElementById(\"id_time\");\n            var location = document.getElementById(\"id_location\");\n            var info = document.getElementById(\"id_info\");\n            var imageWarp = document.getElementById(\"id_image-wrap\");\n            var linkImage = document.getElementById(\"id_link-image\");\n            var link = document.getElementById(\"id_link\");\n            var line = document.getElementById(\"id_normal-row\");\n\n            var screenWidth = data[\"screenWidth\"] - widthPadding;\n            var titleWidth = screenWidth - widthTitlePadding;\n\n            if (data[\"user_logo\"]) {\n                imgInfo.src = data[\"user_logo\"];\n            }else{\n                imgInfo.src = \"com.alipay.android.phone.businesscommon.globalsearch/default_contact\";\n            }\n            if (data[\"user_nick\"]) {\n                titleLabel.style.display = '-webkit-box';\n                titleLabel.innerText = data[\"user_nick\"];\n                titleLabel.style.maxWidth = titleWidth;\n            } else {\n                titleLabel.style.display = 'none';\n            }\n            if (data[\"time\"]) {\n                time.style.display = '-webkit-box';\n                time.innerText = data[\"time\"];\n                titleLabel.style.maxWidth = titleWidth * 0.7;\n            } else {\n                time.style.display = 'none';\n            }\n            if (data[\"location\"]) {\n                location.style.display = '-webkit-box';\n                location.innerText = data[\"location\"];\n            } else {\n                location.style.display = 'none';\n            }\n            if (data[\"content\"]) {\n                info.innerText = data[\"content\"];\n                info.style.display = '-webkit-box';\n            } else {\n                info.style.display = 'none';\n            }\n            imageWarp.innerHTML = \"\";\n            if (data[\"image_url\"]) {\n                linkImage.style.display = 'none';\n                link.style.display = 'none';\n                imageWarp.style.display = 'flex';\n                var strs = new Array();\n                strs = data[\"image_url\"].split(\",\");\n                //计算可用屏幕宽度\n\n                var maxCount = parseInt(screenWidth / widthImage);\n                var hasImgSize = data[\"image_size\"] != \"\" && data[\"image_size\"] != null;\n                if (hasImgSize) {\n                    if (maxCount < strs.length) {\n                        //如果有文案，则减少一个图片\n                        maxCount = maxCount - 1;\n                    } else {\n                        //足够展示所有图片x\n                        hasImgSize = false;\n                    }\n                }\n                //最少显示一张图片\n                if (maxCount < 1) {\n                    maxCount = 1;\n                }\n\n                var isVideo = data[\"comment_type\"] == \"video\";\n                for (var i = 0; i < strs.length && i < maxCount; i++) {\n                    var singleWrap = document.createElement(\"div\");\n                    singleWrap.className = \"img-container\";\n\n                    var image = document.createElement(\"img\");\n                    image.className = \"img\";\n                    image.src = strs[i];\n                    image.contentmode = \"ScaleAspectFill\";\n                    singleWrap.appendChild(image);\n                    if (isVideo) {\n                        var video = document.createElement(\"img\");\n                        video.className = \"video-icon\";\n                        video.src = \"com.alipay.android.phone.businesscommon.globalsearch/icon_video\";\n                        video.contentmode = \"ScaleAspectFill\";\n                        singleWrap.appendChild(video);\n                    }\n                    imageWarp.appendChild(singleWrap);\n                }\n                if (hasImgSize) {\n                    var imageSize = document.createElement(\"label\");\n                    imageSize.className = \"more-image-label\";\n                    imageSize.innerText = data[\"image_size\"];\n                    imageWarp.appendChild(imageSize);\n                }\n            } else {\n                imageWarp.style.display = 'none';\n                if (data[\"link_title\"]) {\n                    link.style.display = '-webkit-box';\n                    link.innerText = data[\"link_title\"];\n                    if (data[\"link_img\"]) {\n                        linkImage.style.display = 'flex';\n                        linkImage.src = data[\"link_img\"];\n                    } else {\n                        linkImage.style.display = 'none';\n                    }\n                } else {\n                    linkImage.style.display = 'none';\n                    link.style.display = 'none';\n                }\n            }\n\n            if (data[\"isLastItem\"]) {\n                line.style.display = \"flex\";\n            } else {\n                line.style.display = \"none\";\n            }\n\n        };","tag":"text"}],"type":"text/javascript"}]},{"style":"display:flex; flex-direction:column;","tag":"body","children":[{"tag":"div","children":[{"tag":"div","children":[{"id":"id_avator","contentmode":"ScaleAspectFill","tag":"img","defaultvalue":"com.alipay.android.phone.businesscommon.globalsearch/default_contact","css":"avator"},{"id":"id_name","tag":"label","children":[{"text":"黄晓明","tag":"text"}],"emoji":"true","css":"name"},{"id":"id_time","tag":"label","children":[{"text":"3小时前","tag":"text"}],"css":"time"}],"css":"row-item"},{"tag":"div","children":[{"id":"id_info","tag":"label","children":[{"text":"aaa","tag":"text"}],"emoji":"true","css":"info"}],"css":"row-item"},{"id":"id_image-wrap","tag":"div","children":[{"tag":"div","children":[{"contentmode":"ScaleAspectFill","tag":"img","css":"img"}],"css":"img-container"},{"tag":"div","children":[{"contentmode":"ScaleAspectFill","tag":"img","css":"img"},{"contentmode":"ScaleAspectFill","tag":"img","css":"video-icon"}],"css":"img-container"},{"tag":"label","children":[{"text":"共2张图片","tag":"text"}],"css":"more-image-label"}],"css":"image-wrap"},{"tag":"div","children":[{"id":"id_link-image","contentmode":"ScaleAspectFill","tag":"img","defaultValue":"com.alipay.android.phone.businesscommon.globalsearch/icon_link","css":"link-image"},{"id":"id_link","tag":"label","children":[{"text":"分享链接跳转","tag":"text"}],"css":"link"}],"css":"image-wrap"},{"tag":"div","children":[{"id":"id_location","tag":"label","children":[{"text":"location","tag":"text"}],"css":"link"}],"css":"image-wrap"}],"css":"cell"},{},{"style":"display:flex;","tag":"div","children":[{"id":"id_normal-row","tag":"div","css":"list_line"}]}]}]},"format":"JSON","tplVersion":"5.1.0"}