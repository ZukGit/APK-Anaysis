{"time":"0003","tplId":"WALLET-SEARCH@publiclifeService","publishVersion":"150603","tag":"WALLET-SEARCH","name":"publiclifeService","data":{"tag":"html","children":[{"tag":"head","children":[{"content":"text/html; charset=UTF-8","tag":"meta","http-equiv":"Content-Type"},{"tag":"style","children":[{"text":".cell {\n        display: flex;\n        flex: 1;\n        flex-direction: row;\n        background-color: #ffffff;\n        padding: 16px 16px 17px 16px;\n    }\n\n    .cell:active {\n        background-color: #e4e4e4;\n    }\n\n    .logo {\n        width: 44px;\n        height: 44px;\n        border-radius: 2px;\n    }\n\n    .container {\n        flex: 1;\n        flex-direction: column;\n        justify-content: center;\n    }\n\n    .titleWrap {\n        flex: 1;\n        flex-direction: row;\n        margin-left: 16px;\n        margin-top: -1px;\n        align-items: flex-start;\n    }\n\n    .titleLabel {\n        font-size: 17px;\n        max-width: 280px;\n        color: #333333;\n        font-family: \"PingFangSC-Regular\";\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n    }\n\n    .titleIcon {\n        width: 15px;\n        height: 15px;\n        margin-top: 4px;\n        margin-left: 4px;\n    }\n\n    .subtitle {\n        flex: 1;\n        font-size: 14px;\n        margin-left: 16px;\n        margin-top: 1px;\n        max-width: 280px;\n        color: #999999;\n        font-family: \"PingFangSC-Regular\";\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n    }\n\n    .contents {\n        display: flex;\n        flex: 1;\n        flex-direction: row;\n        margin-top: 14px;\n        margin-left: 16px;\n    }\n\n    .contentDiv {\n        display: none;\n        border-radius: 14px;\n        border: 1px solid #95CEF9;\n        background-color: #F7FCFF;\n        margin-right: 10px;\n        align-items: center;\n    }\n\n    .content {\n        display: none;\n        font-size: 12px;\n        color: #64B8F4;\n        font-family: \"PingFangSC-Regular\";\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n        max-width: 65px;\n        margin: 6px 10px 6px 12px;\n    }\n\n    .contentBtn {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 50%;\n        height: 28px;\n    }\n\n    .split-line {\n        display: flex;\n        height: 1PX;\n        background-color: #e0e0e0;\n        margin-left: 76px;\n        flex: 1;\n    }\n\n    .split-line-last {\n        display: flex;\n        height: 1PX;\n        background-color: #e0e0e0;\n        margin-left: 0px;\n        flex: 1;\n    }","tag":"text"}],"type":"text/css"},{"tag":"script","children":[{"text":"function isValidStr(str) {\n        return (str && (typeof str == 'string') && str.length > 0);\n    }\n\n    function isValidArray(o) {\n        return Object.prototype.toString.call(o) == '[object Array]';\n    }\n\n    function byId(id) {\n        return document.getElementById(id);\n    }\n\n    function strToJson(str) {\n        var json = eval('(' + str + ')');\n        return json;\n    }\n\n    function updateService(ext, screenWidth, publicId, bizType) {\n        // 服务标签内容显示\n        var content0 = byId(\"content0\");\n        var content1 = byId(\"content1\");\n        var content2 = byId(\"content2\");\n        var contentArray = new Array(content0, content1, content2);\n        // 服务标签内容按钮\n        var contentBtn0 = byId(\"contentBtn0\");\n        var contentBtn1 = byId(\"contentBtn1\");\n        var contentBtn2 = byId(\"contentBtn2\");\n        var contentBtnArray = new Array(contentBtn0, contentBtn1, contentBtn2);\n        //服务标签框view\n        var contentDiv0 = byId(\"contentDiv0\");\n        var contentDiv1 = byId(\"contentDiv1\");\n        var contentDiv2 = byId(\"contentDiv2\");\n        var contentDivArray = new Array(contentDiv0, contentDiv1, contentDiv2);\n\n        var contentWrap = byId(\"contents\");\n\n        // 针对小屏幕调整下服务标签的尺寸\n        for (var i = 0; i < contentArray.length; i++) {\n            var content = contentArray[i];\n            var contentDiv = contentDivArray[i];\n            if (screenWidth < 375) {\n                content.style.maxWidth = \"50px\";\n                contentDiv.style.marginRight = \"5px\";\n            } else {\n                content.maxWidth = \"65px\";\n                contentDiv.marginRight = \"10px\";\n            }\n        }\n\n        var serviceList = ext[\"service_list\"];\n        if (ext[\"service_list\"] == undefined) {\n            contentWrap.style.display = \"none\";\n            return;\n        }\n\n        if (serviceList.length > 0) {\n            serviceList = strToJson(ext[\"service_list\"]);\n        } else {\n            serviceList = [];\n        }\n\n        if (serviceList.length > 0) {\n            contentWrap.style.display = \"flex\";\n        } else {\n            contentWrap.style.display = \"none\";\n        }\n        // 赋值对应的服务内容\n        var index = 0;\n        for (; index < serviceList.length && index < contentArray.length && index < contentBtnArray.length && index < contentDivArray.length; index++) {\n            var content = contentArray[index];\n            content.style.display = \"flex\";\n            // 设置服务标签内容\n            var service = serviceList[index];\n            content.innerText = service[\"name\"];\n            // 设置服务标签跳转函数\n            var contentBtn = contentBtnArray[index];\n            var url = service[\"url\"];\n            var name = service[\"name\"];\n            var bizId = service[\"bizId\"];\n            contentBtn.onclick = function(url, bizId, name) {\n                return function() {\n                    if (isValidStr(url)) {\n                        // spm\n                        var extParams = { \"PublicId\": publicId, \"BizType\": bizType, \"BizId\": bizId, \"ServiceName\": name };\n                        document.invoke(\"log\", { \"actionId\": \"clicked\", \"extParams\": [\"\", \"\", \"\", extParams], \"seed\": \"a138.b3720.c8777.d15613\", \"bizType\": \"Channels\" });\n\n                        document.openURL(url);\n                    }\n                };\n            }(url, bizId, name);\n\n            var contentDiv = contentDivArray[index];\n            contentDiv.style.display = \"flex\";\n        }\n        // 隐藏未使用的服务标签\n        for (; index < contentArray.length && index < contentDivArray.length; index++) {\n            var content = contentArray[index];\n            content.innerText = \"\";\n            content.style.display = \"none\";\n\n            var contentDiv = contentDivArray[index];\n            contentDiv.style.display = \"none\";\n        }\n    }\n\n    document.onreload = function(data) {\n        // doc结点\n        var logo = byId(\"logo\");\n        var titleLabel = byId(\"titleLabel\");\n        var titleIcon = byId(\"titleIcon\");\n        var subtitle = byId(\"subtitle\");\n        var titleWrap = byId(\"titleWrap\");\n\n        var screenWidth = data[\"screenWidth\"] != undefined ? data[\"screenWidth\"] : 375;\n\n        // 数据更新\n        var ext = {};\n        var system = document.platform;\n        if (system == \"iOS\") {\n            ext = data[\"ext\"];\n        } else if (system == \"android\") {\n            ext = data;\n        }\n\n        var hightlightList = strToJson(ext[\"hightlight_indexs\"]);\n        var publicId = ext[\"publicId\"];\n        var bizType = ext[\"publicBizType\"];\n\n        // 头像\n        if (system == \"iOS\") {\n            logo.src = \"APGlobalSearch.bundle/normal_default_icon\";\n            logo.defaultvalue = \"APGlobalSearch.bundle/normal_default_icon\";\n            logo.failurevalue = \"APGlobalSearch.bundle/normal_default_icon\";\n        } else if (system == \"android\") {\n            logo.src = \"android-phone-wallet-globalsearch/com.alipay.android.phone.businesscommon.globalsearch/search_life\";\n            logo.defaultvalue = \"android-phone-wallet-globalsearch/com.alipay.android.phone.businesscommon.globalsearch/search_life\";\n            logo.failurevalue = \"android-phone-wallet-globalsearch/com.alipay.android.phone.businesscommon.globalsearch/search_life\";\n        }\n        if (isValidStr(data[\"icon\"])) {\n            logo.style.display = \"flex\";\n            logo.src = data[\"icon\"];\n        }\n\n        // 标题\n        if (isValidStr(data[\"name\"])) {\n            titleLabel.style.display = \"flex\";\n            titleLabel.innerText = data[\"name\"];\n            titleLabel.style.maxWidth = (screenWidth - 95) + \"px\";\n        } else {\n            titleLabel.innerText = \"\";\n            titleLabel.style.display = \"none\";\n        }\n\n        // 认证标记\n        if (isValidStr(ext[\"authrization_logo\"]) && (ext[\"authrization_flag\"] == 1)) {\n            titleIcon.style.display = \"flex\";\n            titleIcon.src = ext[\"authrization_logo\"];\n        } else {\n            titleIcon.src = \"\";\n            titleIcon.style.display = \"none\";\n        }\n\n        // 副标题\n        if (isValidStr(data[\"desc\"])) {\n            subtitle.style.display = \"flex\";\n            subtitle.innerText = data[\"desc\"];\n            subtitle.style.maxWidth = (screenWidth - 80) + \"px\";\n            titleWrap.style.marginTop = \"-1px\";\n        } else {\n            subtitle.innerText = \"\";\n            subtitle.style.display = \"none\";\n            titleWrap.style.marginTop = \"10px\";\n        }\n\n        // 服务内容\n        updateService(ext, screenWidth, publicId, bizType);\n\n        // 底部分割线\n        if (system == \"iOS\") {\n            if (data[\"isLastOne\"]) {\n                byId(\"normal-row\").className = \"split-line-last\";\n            } else {\n                byId(\"normal-row\").className = \"split-line\";\n            }\n        } else if (system == \"android\") {\n            if (data[\"isLastItem\"]) {\n                byId(\"normal-row\").style.display = 'flex';\n            } else {\n                byId(\"normal-row\").style.display = 'none';\n            }\n        }\n    };","tag":"text"}],"type":"text/javascript"}]},{"style":"display:flex; flex-direction:column;background-color:#ffffff","tag":"body","children":[{"tag":"div","children":[{"id":"logo","contentmode":"ScaleAspectFill","tag":"img","src":"","defaultvalue":"","css":"logo"},{"id":"container","tag":"div","children":[{"id":"titleWrap","tag":"div","children":[{"id":"titleLabel","tag":"label","css":"titleLabel"},{"id":"titleIcon","contentmode":"ScaleAspectFill","tag":"img","src":"","defaultvalue":"","css":"titleIcon"}],"css":"titleWrap"},{"id":"subtitle","tag":"label","css":"subtitle"},{"id":"contents","tag":"div","children":[{"id":"contentDiv0","tag":"div","children":[{"id":"content0","tag":"label","css":"content"},{"id":"contentBtn0","tag":"button","css":"contentBtn"}],"css":"contentDiv"},{"id":"contentDiv1","tag":"div","children":[{"id":"content1","tag":"label","css":"content"},{"id":"contentBtn1","tag":"button","css":"contentBtn"}],"css":"contentDiv"},{"id":"contentDiv2","tag":"div","children":[{"id":"content2","tag":"label","css":"content"},{"id":"contentBtn2","tag":"button","css":"contentBtn"}],"css":"contentDiv"}],"css":"contents"}],"css":"container"}],"css":"cell"},{"id":"normal-row","tag":"div","css":"split-line"}]}]},"format":"JSON","tplVersion":"5.2.0"}