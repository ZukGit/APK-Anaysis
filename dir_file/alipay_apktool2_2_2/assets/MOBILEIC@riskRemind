{"time":"0023","tplId":"MOBILEIC@riskRemind","publishVersion":"150603","tag":"MOBILEIC","name":"riskRemind","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"VIVerifyCore.bundle/mic.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"VIVerifyCore.bundle/mic.css"},{"tag":"script","src":"VIVerifyCore.bundle/vi-amc.js"},{"tag":"script","src":"VIVerifyCore.bundle/mic.js"},{"tag":"meta","src":"android-phone-securitycommon-verifyidentitybiz/mic.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"android-phone-securitycommon-verifyidentitybiz/mic.css"},{"tag":"script","src":"android-phone-securitycommon-verifyidentitybiz/vi-amc.js"},{"tag":"script","src":"android-phone-securitycommon-verifyidentitybiz/mic.js"},{"tag":"script","children":[{"text":"var getTag = amc.fn.getById;\n            var createTag = amc.fn.create;\n            var rpc = amc.rpcData;\n            var countDownNum;\n            var countDownTag;\n            \n            //### 初始化\n            function init() {\n                var nav = amc.fn.getNav(amc.res.navBack, '{{return}}', '{{safe_remind}}', null, null, onBack, null);\n                getTag('bodyContainer').insertBefore(nav, getTag('mainBody'));\n                \n                var remindInfo = {};\n                try {\n                    remindInfo = JSON.parse(rpc['remindInfo']);\n                } catch (error) {\n                    print(\"fail to get remindInfo: \" + error.message);\n                }\n                // 图标\n                getTag('remindImg').src = remindInfo['icon'];\n                // 标题\n                getTag('titleLable').innerText = remindInfo['header'];\n                // 副标题\n                var subtitle = remindInfo['subtitle'];\n                if (remindInfo['point'] && remindInfo['point'].length > 0) {\n                    var points = remindInfo['point'];\n                    for (var i = 0; i < points.length; i++) {\n                        var point = points[i];\n                        subtitle += ('\\n<font color=\"#F5A623\"> - ' + point['text'] + '</font>');\n                    }\n                }\n                getTag('descLable').innerText = subtitle;\n                \n                // 倒计时\n                countDownNum = remindInfo['count_down_time'];\n                \n                // 创建按钮\n                if (remindInfo['button'] && remindInfo['button'].length > 0) {\n                    \n                    var buttons = remindInfo['button'];\n                    for (var i = 0; i < buttons.length; i++) {\n                        createButton(buttons[i]);\n                    }\n                }\n            }\n        \n            // 创建按钮\n            function createButton(button) {\n                var mainBody = getTag('mainBody');\n                var btnDiv = createTag('div');\n                var btn = createTag('button');\n                \n                if (button['type'] == 'marjor') {   // 蓝底\n                    btnDiv.className = 'margin-lr btnDiv amc-align-center amc-justify-center';\n                    btn.className = 'btn-blue';\n                    btn.id = 'submitBtn-blue';\n                } else if (button['type'] == 'second') {  // 白底\n                    btnDiv.className = 'margin-lr btnDiv amc-align-center amc-justify-center';\n                    btn.className = 'btn-white';\n                    btn.id = 'submitBtn-white';\n                } else {    // 链接\n                    btnDiv.className = 'margin-lr btnDiv amc-align-center amc-justify-center';\n                    btn.className = 'btn-link';\n                    btn.id = 'submitBtn-link';\n                }\n                btn.innerText = button['name'];\n                btn.value = button['name'];\n                \n                mainBody.appendChild(btnDiv);\n                btnDiv.appendChild(btn);\n                \n                btn.onclick = function() {\n                    submitAction(button['code']);\n                }\n                \n                if (button['count_down'] == 'true') {\n                    countDownTag = btn.id;\n                    countDown();\n                }\n            }\n        \n            //### 后退\n            function onBack() {\n                mic.fn.onBack();\n            }\n        \n            // 倒计时\n            function countDown() {\n                var btn = getTag(countDownTag);\n                if (countDownNum > 0) {\n                    btn.disabled = true;\n                    btn.innerText = btn.value + '(' + countDownNum + 's)';\n                    countDownNum -= 1;\n                    setTimeout(countDown, 1000);\n                } else {\n                    btn.disabled = false;\n                    btn.innerText = btn.value;\n                }\n            }\n        \n            //### 按钮点击事件\n            function submitAction(code) {\n                var obj = {};\n                obj['showLoading'] = 'true';\n                obj['eventName'] = 'vi_rpc_validate';\n                obj['params'] = {\n                    'operation': code\n                };\n                obj['moduleName'] = 'REMIND';\n                obj['actionName'] = 'VERIFY_REMIND';\n                document.asyncSubmit(obj,\n                    function(data) {\n                        obj = {};\n                        obj['success'] = data['success'];\n                        obj['verifySuccess'] = data['verifySuccess'];\n                        obj['finish'] = data['finish'];\n                        obj['finishCode'] = data['finishCode'];\n                        mic.fn.onBackWithResponse(obj);\n                    }\n                );\n            }","tag":"text"}]},{"tag":"style","children":[{"text":".remindDiv {\n                flex-direction: column;\n                padding: 30px 16px;\n                background-color: #fff;\n                margin-bottom: 15px;\n            }\n        \n            .remindImg {\n                width:65px;\n                height:65px;\n                margin-bottom:16px;\n            }\n        \n            .titleLabel {\n                text-align:center;\n                font-size: 20px;\n                color: #333333;\n                margin-bottom:9px;\n            }\n        \n            .descLabel {\n                text-align:left;\n                font-size: 14px;\n                color: #999999;\n            }\n        \n            .margin-lr {\n                margin-left: 15px;\n                margin-right: 15px;\n                margin-top: 15px;\n            }\n        \n            .btnDiv {\n                border: 0;\n                border-radius: 3px;\n                font-size: 18px;\n                height: 47px;\n                max-height: 47px;\n                min-height: 47px;\n                flex: 1.0;\n            }\n        \n            .btn-blue {\n                background-color: #108ee9;\n                border: 0;\n                border-radius: 3px;\n                color: #fff;\n                font-size: 18px;\n                height: 47px;\n                max-height: 47px;\n                min-height: 47px;\n                flex: 1.0;\n            }\n            .btn-blue:active {\n                background-color: #108ee9;\n                color: #fff;\n            }\n            .btn-blue:disabled {\n                background-color: #7BBBF4;\n                color: rgba(255, 255, 255, 0.6);\n            }\n        \n            .btn-white {\n                background-color: #fff;\n                border: 0;\n                border-radius: 3px;\n                color: #000;\n                font-size: 18px;\n                height: 47px;\n                max-height: 47px;\n                min-height: 47px;\n                flex: 1.0;\n            }\n            .btn-white:active {\n                background-color: #fff;\n                color: #000;\n            }\n            .btn-white:disabled {\n                background-color: #fff;\n                color: #9B9B9B;\n            }\n        \n            .btn-link {\n                background-color:#f5f5f9;\n                border: 0;\n                border-radius: 3px;\n                color: #108ee9;\n                font-size: 18px;\n                height: 47px;\n                max-height: 47px;\n                min-height: 47px;\n                flex: 1.0;\n            }\n            .btn-link:active {\n                background-color:#f5f5f9;\n                color: #108ee9;\n            }\n            .btn-link:disabled {\n                background-color:#f5f5f9;\n                color: #9B9B9B;\n            }","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"bodyContainer","tag":"div","children":[{"id":"mainBody","tag":"div","children":[{},{"id":"remindDiv","tag":"div","children":[{"tag":"div","children":[{"id":"remindImg","tag":"img","src":"VIVerifyCore.bundle/alipay_vi_warning.png","css":"remindImg"}],"css":"amc-justify-center"},{"id":"titleLable","tag":"label","children":[{"text":"您可能正在遭遇诈骗","tag":"text"}],"css":"titleLabel"},{"id":"descLable","tag":"label","children":[{"text":"描述","tag":"text"}],"css":"descLabel"}],"css":"amc-pd-lr remindDiv"}],"css":"amc-scroll-flex"}],"css":"mic-fullscreen"}],"css":"mic-body-opacity"}]},"format":"JSON","tplVersion":"5.3.0"}