{"time":"0019","tplId":"QUICKPAY@deposit-index-flex","publishVersion":"150924","tag":"QUICKPAY","name":"deposit-index-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"meta","locale":{"en_US":{"large_recharge":"Large amounts"},"zh_TW":{"large_recharge":"大額充值"},"zh_HK":{"large_recharge":"大額增值"},"zh_CN":{"large_recharge":"大额充值"}},"type":"i8n"},{"tag":"script","children":[{"text":"var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var limitCharge=-9999;var choosedChannelNo=-1;var submitAction=\"/cashier/deposit\";var lastInput=\"\";var showLargeRecharge=rpc.pageSwitch&&rpc.pageSwitch.showLargeRecharge;var assignedChannel=rpc.assigned_channel;function showLimitIntro(){document.submit({action:{name:\"/frontpay/limitQuery\"}})}function otherBank(){var b={action:{name:\"/deposit/switchChannel\",loadtxt:\"\"}};var a={assigned_channel:assignedChannel};b.param=a;document.asyncSubmit(b,function(c){if(c.name){assignedChannel=c.channel;rpc.recommend_channel_name=c.name;rpc.recommend_bank_logo_url=c.logo;rpc.recommend_card_tailno=c.tail;rpc.limit_amount=c.limit;choosedChannelNo=c.index;loadData()}if(c.pageloading===\"1\"){getTag(\"arrowRight\").src=amc.res.indicator}else{if(c.pageloading===\"0\"){getTag(\"arrowRight\").src=amc.res.arrowRight}}});getTag(\"arrowRight\").src=amc.res.indicator}function usePhoneCard(){var a=\"loc:openurl('alipays://platformapi/startApp?appId=10000033')\";document.submit({action:{name:a}})}function gotolargeRecharge(){var a={bizCode:\"AccountBalance\",spmId:\"a210.b2465.c5492.d8655\",actionId:\"clicked\",logLevel:\"2\",param4:\"\",type:\"click\"};walletFeedback(a);pageDestroyLog();var b=rpc.largeRechargeUrl||\"alipays://platformapi/startapp?appId=66666685&url=%2Fwww%2Flarge_recharge%2Findex.htm%3Fsource%3Dcashier\";amc.fn.openurl(b,\"0\")}function pageDestroyLog(){var a={bizCode:\"AccountBalance\",spmId:\"a210.b2465\",actionId:\"pageMonitor\",type:\"destroy\"};walletFeedback(a)}function walletFeedback(a){if(!amc.fn.sdkGreaterThan(\"10.6.5\")||!a){return}try{var c={bizCode:a.bizCode,spmId:a.spmId,actionId:a.actionId,logLevel:a.logLevel,param4:a.param4,type:a.type};amc.fn.feedback(\"spmtracker\",c)}catch(b){}}function onBack(){if(showLargeRecharge){pageDestroyLog()}amc.fn.hideKeyboard();document.submit({action:{name:\"loc:exit\"}})}function submit(){var c={action:{name:submitAction,loadtxt:\"\",params:{choosed_channel_no:choosedChannelNo}}};var a={};var b=getTag(\"chargeMoney\").value;a.deposit_amount=formatCurrencySubmit(b);c.param=a;document.asyncSubmit(c,function(d){amc.fn.shouldShowBtnIndicator(d,\"submit\",\"loading\")});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"submit\",\"loading\")}function checkInput(){var d=getTag(\"chargeMoney\").value;var b=\"^(([1-9]{1}\\\\d{0,8})|([0]{1}))(\\\\.(\\\\d){0,2})?$\";var c=d.match(b);if(d&&!d.match(b)){getTag(\"chargeMoney\").value=lastInput;return}else{lastInput=d}var a=parseFloat(d);if((a>0)&&(a<=limitCharge)){getTag(\"submit\").disabled=false}else{getTag(\"submit\").disabled=true}if(limitCharge&&(limitCharge==\"-1.00\"||limitCharge==\"-1\")){if(a>0){getTag(\"submit\").disabled=false}switchChargeAlert(false);return}if((a>limitCharge)&&(limitCharge>0)){switchChargeAlert(true)}else{switchChargeAlert(false)}}function switchChargeAlert(a){if(a){hide(\"emptyBox\");show(\"chargeAlert\")}else{show(\"emptyBox\");hide(\"chargeAlert\")}}function loadData(){if(rpc.recommend_channel_name){getTag(\"bankName\").innerText=rpc.recommend_channel_name;submitAction=\"/cashier/deposit\"}else{getTag(\"bankName\").innerText=\"{{no_method}}\";submitAction=\"/setting/addCard\"}if(rpc.recommend_bank_logo_url){getTag(\"bankIcon\").src=rpc.recommend_bank_logo_url}if(rpc.recommend_card_tailno){getTag(\"bankNum\").innerText=amc.fn.i18nPlaceholderReplace(\"{{tail_no}}\",rpc.recommend_card_tailno);show(\"bankNum\")}else{hide(\"bankNum\")}if(rpc.limit_amount){limitCharge=parseFloat(rpc.limit_amount)}else{limitCharge=-1}if(limitCharge&&(limitCharge==\"-1.00\"||limitCharge==\"-1\")){hide(\"chargeTips\")}else{show(\"chargeTips\")}if(rpc.limit_amount){getTag(\"chargeTips\").innerText=amc.fn.i18nPlaceholderReplace(\"{{card_max_deposit_full}}\",formatCurrency(rpc.limit_amount))}checkInput()}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var e=rpc.recommend_channel_empty?null:\"{{limit_info}}\";var f=rpc.recommend_channel_empty?null:showLimitIntro;var c={backMode:\"exit\"};var g=amc.fn.getNav(amc.res.navBack,\"{{return}}\",\"{{account_deposit}}\",e,null,onBack,f,c);getTag(\"mainBody\").insertBefore(g,getTag(\"uppderBody\"));getTag(\"mainBody\").style.height=amc.specs.bodyHeight;if(amc.isAndroid){getTag(\"loading\").src=amc.path+\"alipay_msp_indicator_white_loading\"}getTag(\"arrowRight\").src=amc.res.arrowRight;getTag(\"bankIcon\").defaultvalue=amc.path+\"alipay_msp_bank_logo\";getTag(\"bankIcon\").failurevalue=amc.path+\"alipay_msp_bank_logo\";loadData();if(rpc.notice){var d=amc.fn.create(\"div\");d.className=\"amc-marquee amc-pd-lr\";var b=amc.fn.create(\"marquee\");b.className=\"amc-marquee\";b.innerText=rpc.notice;b.style.width=window.innerWidth-(amc.isPlus?40:30);d.appendChild(b);getTag(\"mainBody\").insertBefore(d,getTag(\"uppderBody\"))}if(rpc.recommend_content){getTag(\"adFrame\").src=rpc.recommend_content}else{hide(\"adFrame\")}if(showLargeRecharge){var a={bizCode:\"AccountBalance\",spmId:\"a210.b2465\",actionId:\"pageMonitor\",type:\"create\"};walletFeedback(a)}else{hide(\"largeRecharge\");hide(\"divideLine\");hide(\"leftPadding\")}getTag(\"chargeMoney\").focus()}function formatCurrencySubmit(a){a=isNaN(a)||a===\"\"||a===null?0:a;if(typeof a==\"string\"){a=Number(a)}return a.toFixed(2)}function formatCurrency(a){a=isNaN(a)||a===\"\"||a===null?0:a;if(typeof a==\"string\"){a=Number(a)}return a.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g,\"$&,\")}function autoSubmit(){if(event.which==\"keycode_confirm\"||event.which==10){if(!getTag(\"submit\").disabled){submit()}}else{if(event.which==4){onBack()}}}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".alert-box{padding-top:7px;padding-bottom:8px;}\n.alert-label{color:#f4333c;}\n.money-label {\n    min-width: 65px;\n    max-width: 105px;\n}\n.margin-t {\n    margin-top: 10px;\n}\n\n.detail-cell {\n    align-items: center;\n    background-color: #fff;\n    padding-top: 5px;\n    padding-bottom: 5px;\n}\n.divide-box {\n    padding-left: 20px;\n    padding-right: 20px;\n}\n.divide-line {\n    height: 12px;\n    background-color: #C0C0C6;\n    width: 2PX;\n    align-self: center;\n    margin: 0 20px;\n}\n.max-link-width {\n    max-width: 50%;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{"id":"uppderBody","tag":"div","children":[{"id":"recommend_channel","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"id":"bankIcon","tag":"img","css":"deposit-img-box"},{"tag":"div","children":[{"tag":"div","children":[{"id":"bankName","tag":"label","children":[{"text":"{{bank_name}}","tag":"text"}],"css":"amc-cell-m-box amc-font-xl amc-flex-1 amc-ellipsis"}]},{"tag":"div","children":[{"id":"bankNum","tag":"label","children":[{"text":"{{bank_no}}","tag":"text"}],"css":"amc-cell-m-box amc-font-m amc-text-slight-color margin-t amc-flex-1 amc-ellipsis"}]}],"css":"amc-pd-lr amc-column-flex-1"},{"tag":"div","children":[{"id":"arrowRight","tag":"img"}]}],"onclick":"otherBank()","css":"amc-large-cell amc-pd-lr"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"id":"chargeTips","tag":"label","children":[{"text":"{{deposit_info}}","tag":"text"}],"css":"amc-item-l-text amc-flex-1 amc-ellipsis-3-line"}],"css":"amc-flex-1"}],"css":"amc-pd-t-s amc-pd-b-s amc-pd-lr"}],"css":"amc-v-box"},{"id":"input_money","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"{{money}}","tag":"text"}],"css":"money-label amc-font-xl amc-flex-1 amc-ellipsis-2-line"}],"css":"amc-pd-lr"},{"tag":"div","children":[{"id":"chargeMoney","autofocus":"true","placeholder":"{{input_deposit_money}}","tag":"input","value":"","onkeydown":"autoSubmit();","type":"money","css":"amc-input","oninput":"checkInput()"}],"css":"amc-flex-1 amc-input-box-height"}],"css":"detail-cell"},{"tag":"div","css":"amc-1px-line"},{"tag":"div","children":[{"id":"chargeAlert","tag":"label","children":[{"text":"{{money_limit}}","tag":"text"}],"css":"amc-font-xs alert-label amc-hidden amc-flex-1 amc-ellipsis-3-line"}],"css":"amc-pd-lr amc-flex-1 alert-box"},{"id":"emptyBox","tag":"div"},{"tag":"div","children":[{"id":"loading","tag":"img","src":"indicatior","css":"amc-loading-img amc-text-white-clolor amc-hidden"},{"id":"submit","tag":"button","children":[{"text":"{{next}}","tag":"text"}],"onclick":"submit()","disabled":"true","css":"amc-btn-primary"}],"css":"amc-margin-lr amc-margin-t amc-btn-primary amc-align-center amc-justify-center"}],"css":"amc-v-box"},{},{"tag":"div","children":[{"id":"leftPadding","tag":"div","css":"amc-flex-1"},{"id":"largeRecharge","tag":"div","children":[{"tag":"label","children":[{"text":"{{large_recharge}}","tag":"text"}],"css":"max-link-width amc-font-m amc-theme-color amc-flex-1 amc-text-right amc-ellipsis"}],"onclick":"gotolargeRecharge();"},{"id":"divideLine","tag":"div","css":"divide-line"},{"tag":"div","children":[{"id":"usePhoneCard","tag":"label","children":[{"text":"{{phone_card_deposit}}","tag":"text"}],"onclick":"usePhoneCard()","css":"max-link-width amc-font-m amc-theme-color amc-flex-1 amc-ellipsis"}]},{"tag":"div","css":"amc-flex-1"}],"css":"amc-pd-lr amc-pd-t-l amc-justify-center"}],"css":"amc-main"},{},{"id":"adFrame","tag":"iframe","css":"amc-flex-1 amc-pd-s"}],"css":"amc-v-box"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.2.1"}