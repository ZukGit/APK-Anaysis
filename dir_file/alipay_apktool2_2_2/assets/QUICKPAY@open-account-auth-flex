{"time":"0001","tplId":"QUICKPAY@open-account-auth-flex","publishVersion":"150924","tag":"QUICKPAY","name":"open-account-auth-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"var create=amc.fn.create;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var rpc=amc.rpcData;var params=rpc.params||{};var checkedPng=amc.path+\"alipay_msp_checked\";var logoPng=params.logo_url||\"\";var partnerName=params.auth_title||\"\";var optionTitle=params.auth_option_title||\"\";var account=rpc.hidden_logon_id||\"\";var accountInfoTitle=\"支付宝账号：\"+account;var authInfoTitle=params.authInfoTitle;if(!authInfoTitle){authInfoTitle=\"您同意将以下信息授权给 \"+partnerName}var authOptionList=params.auth_option_list||\"\";var isSamsungAuth=(params.service===\"com.alipay.vendorpay.validate\");var isInsideAuth=(params.auth_scene===\"inside\");var isShowChangeAcc=params.show_change_acc&&!isSamsungAuth;var checkboxs=[];var protocols=[];var authTypeText=(params.auth_type===\"LOGIN\")?\"{{login}}\":\"{{auth}}\";var canAuth=true;var resPath=amc.isIOS?\"AlipaySDK.bundle/\":\"com.alipay.android.app/\";function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var a=amc.fn.navBack(false,amc.fn.i18nPlaceholderReplace(\"{{alipay_with_sth}}\",authTypeText),null,null,onBack,null);getTag(\"body\").insertBefore(a,getTag(\"mainBody\"));getTag(\"merchantLogo\").src=logoPng;getTag(\"merchantLogo\").defaultvalue=resPath+\"alipay_msp_auth_default_logo\";getTag(\"alipayLogo\").src=resPath+\"alipay_msp_auth_alipay_logo\";getTag(\"arrow\").src=resPath+\"alipay_msp_side_relate\";getTag(\"btnText\").innerText=amc.fn.i18nPlaceholderReplace(\"{{confirm_sth}}\",authTypeText);getTag(\"btnText\").style.maxWidth=window.innerWidth-70;getTag(\"authInfoTitle\").innerText=authInfoTitle;var j=getTag(\"accountInfo\");j.innerText=accountInfoTitle;j.style.maxWidth=window.innerWidth-30-(isShowChangeAcc?60:0);if(isShowChangeAcc){show(\"changeBtn\")}if(params.auth_text_list){show(\"authItemsBox\");var e=params.auth_text_list||[];if(isSamsungAuth){e.push(\"{{auth_qrcode_info}}\")}var c=getTag(\"authItems\");for(var d=0;d<e.length;d++){var f=create(\"div\",\"auth-item\",c);var b=create(\"div\",\"auth-dot\",f);var g=create(\"label\",\"auth-item-text amc-ellipsis\",f);g.innerText=e[d]}}checkboxs=getOptionList(authOptionList,\"TEXT\");if(checkboxs&&checkboxs.length>0){for(var h in checkboxs){initCheckbox(checkboxs[h])}}protocols=getOptionList(authOptionList,\"URL\");if(protocols.length===0){hide(\"protocolArea\")}if(isInsideAuth&&params.insideTip){show(\"insideTipBox\");getTag(\"insideTip\").innerText=params.insideTip}getTag(\"mainBody\").style.height=amc.specs.bodyHeight;if(params.auth_type!=\"LOGIN\"){getTag(\"agree\").innerText=\"确认授权即表示同意\";show(\"authSceneTipBox\");show(\"skipAuthBox\")}if(isSamsungAuth||isInsideAuth){getTag(\"authSceneTip\").innerText=\"Auth_Inside\"}}function getOptionList(d,b){var c=[];for(var a in d){if(d[a].type===b){c.push(d[a])}}return c}function initCheckbox(b){var a=getTag(\"checkArea\");var c=create(\"div\");c.className=\"amc-align-center check-item\";var d;if(b.forced){d=create(\"img\");d.className=\"check-img\";d.src=checkedPng;c.appendChild(d)}else{d=create(\"input\");c.appendChild(d);d.type=\"checkbox\";d.className=amc.isIOS?\"checkbox-ios\":\"checkbox-android\";d.checked=b.checked}d.className=d.className+\" margin-r-xs\";checklabel=create(\"label\");checklabel.innerText=b.optionText;checklabel.className=\"check-text amc-flex-1 amc-ellipsis\";c.appendChild(checklabel);c.onclick=function(){d.checked=!d.checked};a.appendChild(c);b._checkbox=d}function showProtocol(){for(var a=0;a<protocols.length;a++){protocols[a][\"text\"]=protocols[a][\"optionName\"]||\"{{serve_protocol}}\";protocols[a][\"url\"]=protocols[a][\"optionText\"]}amc.fn.showProtocolList(protocols)}function onSubmit(){if(!canAuth){return}var b=[];for(var a=0;a<checkboxs.length;a++){if(checkboxs[a].forced){b.push(checkboxs[a].optionKey)}else{if(checkboxs[a][\"_checkbox\"].checked===true||checkboxs[a][\"_checkbox\"].checked===\"1\"){b.push(checkboxs[a].optionKey)}}}b.push(\"PROTOCOL\");var c;if(isSamsungAuth){c={param:{agree:b,service:\"com.alipay.vendorpay.validate\"},action:{name:\"/open/service\",loadtxt:\"\"}}}else{if(isInsideAuth){c={param:{agree:b,service:\"com.alipay.account.auth\"},action:{name:\"/open/service\",loadtxt:\"\"}}}else{c={param:{agree:b},action:{name:\"/account/auth\",loadtxt:\"\"}}}}amc.fn.playGif(getTag(\"gifImg\"),amc.res.loading);getTag(\"btnText\").innerText=\"{{confirming_upgrade}}\";document.submit(c);setTimeout(resetBtn,3000);canAuth=false}function onSwitchAccount(){var a={action:{name:\"/cashier/switchAccount\"}};document.submit(a)}function resetBtn(){amc.fn.playGif(getTag(\"gifImg\"),\"\");getTag(\"btnText\").innerText=amc.fn.i18nPlaceholderReplace(\"{{confirm_sth}}\",authTypeText);canAuth=true}function onKeyDown(){if(event.which==4){onBack()}}function onBack(){amc.fn.exitConfirm()};","tag":"text"}]},{"tag":"style","children":[{"text":".bold-text {\n        font-weight: bold\n    }\n\n    .amc-nav-r-box {}\n\n    .amc-nav-l-text {\n        color: #108ee9;\n        font-size: 14px;\n        text-align: left;\n    }\n\n    .agree-label {\n        max-width: 150px;\n    }\n\n    .stretch-self {\n        align-self: stretch;\n    }\n\n    .inside-tip-box {\n        min-height: 63px;\n        padding: 5px 15px 24px 15px;\n        justify-content: flex-end;\n    }\n\n    .inside-tip {\n        font-size: 13px;\n        color: #888;\n    }\n\n    .top-bg {\n        background-color: #108EE9;\n        padding: 30px 15px;\n    }\n\n    .change-btn {\n        max-width: 100px;\n        margin-left: 6px;\n        font-size: 15px;\n        color: #fff;\n    }\n\n    .account-info {\n        font-size: 15px;\n        color: #fff;\n        opacity: 0.8;\n    }\n\n    .auth-info-title {\n        font-size: 15px;\n        color: #000;\n    }\n\n    .pd-b {\n        padding-bottom: 15px;\n    }\n\n    .pd-lr {\n        padding-left: 15px;\n        padding-right: 15px;\n    }\n\n    .auth-items-box {\n        padding: 0 15px 15px 15px;\n    }\n\n    .auth-items {\n        padding-top: 6px;\n    }\n\n    .auth-dot {\n        height: 4px;\n        width: 4px;\n        border-radius: 2px;\n        background-color: #888;\n        margin-right: 6px;\n    }\n\n    .auth-item {\n        margin-top: 9px;\n        align-items: center;\n    }\n\n    .auth-item-text {\n        font-size: 15px;\n        color: #888;\n    }\n\n    .check-text {\n        font-size: 15px;\n        color: #000;\n    }\n\n    .check-item {\n        padding-top: 18px;\n    }\n\n    .margin-t {\n        margin-top: 15px;\n    }\n\n    .btn-box {\n        padding-top: 30px;\n        padding-bottom: 15px;\n    }\n\n    .auth-info-title-box {\n        padding: 10px 15px 15px 15px;\n    }\n\n    .font-m {\n        font-size: 15px;\n    }\n\n    .font-l {\n        font-size: 18px;\n    }\n\n    .margin-r-xs {\n        margin-right: 6px;\n    }\n\n    .btn-primary {\n        background-color: #108ee9;\n        border: 0;\n        border-radius: 4px;\n        color: #fff;\n        font-size: 18px;\n        height: 43px;\n        max-height: 43px;\n        min-height: 43px;\n        flex: 1.0;\n    }\n\n    .btn-primary:active {\n        background-color: #1284D6;\n        color: #fff;\n    }\n\n    .btn-primary:disabled {\n        background-color: #ebebf0;\n        color: #d2d2d2;\n    }\n\n    .btn-img {\n        width: 24px;\n        height: 24px;\n        margin-right: 8px;\n    }\n\n    .check-img {\n        height: 15px;\n        width: 15px;\n    }\n\n    .checkbox-ios {\n        width: 15px;\n        height: 15px;\n        background-image: url(AlipaySDK.bundle/alipay_msp_check);\n        background-size: 15px 15px;\n    }\n\n    .checkbox-ios:checked {\n        background-image: url(AlipaySDK.bundle/alipay_msp_checked);\n    }\n\n    .checkbox-ios:disabled {\n        background-image: url(AlipaySDK.bundle/alipay_msp_check_disable);\n    }\n\n    .checkbox-android {\n        width: 15px;\n        height: 15px;\n        background-image: url(com.alipay.android.app/alipay_msp_check);\n        background-size: 15px 15px;\n    }\n\n    .checkbox-android:checked {\n        background-image: url(com.alipay.android.app/alipay_msp_checked);\n    }\n\n    .checkbox-android:disabled {\n        background-image: url(com.alipay.android.app/alipay_msp_check_disable);\n    }\n\n    .protocol-area {\n        padding-top: 18px;\n    }\n\n    .skip-auth-box {\n        padding: 0px 15px 0px 15px;\n        margin-bottom: 32px;\n        justify-content: center;\n        margin-top: -18px;\n        height: 18px;\n    }\n\n    .auth-scene-box {\n        padding: 0px 15px 0px 15px;\n        justify-content: center;\n        height: 18px;\n    }\n    .auth-scene-tip {\n        font-size: 10px;\n        text-align: right;\n        color: #CCC;\n    }\n    .logo-box {\n        width: 54px;\n        height: 54px;\n        border-radius: 10px;\n        background-color: #57AEEC;\n    }\n    .logo {\n        width: 50px;\n        border-radius: 10px;\n        height: 50px;\n    }\n    .arrow {\n        width: 29.83px;\n        height: 29.83px;\n        margin: 0px 16px;\n    }\n    .account-box {\n        margin-top: 9.5px;\n    }","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"mainBody","tag":"div","children":[{},{"id":"banner","tag":"div","children":[{"tag":"div","children":[{"tag":"div","children":[{"id":"merchantLogo","tag":"img","css":"logo"}],"css":"logo-box amc-flex-center"},{"id":"arrow","tag":"img","css":"arrow"},{"tag":"div","children":[{"id":"alipayLogo","tag":"img","css":"logo"}],"css":"logo-box amc-flex-center"}],"css":"amc-flex-center"},{"tag":"div","children":[{"id":"accountInfo","tag":"label","css":"account-info amc-ellipsis"},{"tag":"div","children":[{"id":"changeBtn","tag":"label","children":[{"text":"{{sel}}","tag":"text"}],"onclick":"onSwitchAccount()","css":"change-btn amc-hidden"}],"css":"amc-align-center"}],"css":"amc-justify-center account-box"}],"css":"top-bg amc-v-box"},{},{"tag":"div","children":[{"tag":"div","children":[{"id":"authInfoTitle","tag":"label","css":"auth-info-title amc-flex-1 amc-ellipsis-2-line"}],"css":"auth-info-title-box"},{"tag":"div","css":"amc-1px-line"},{},{"id":"authItemsBox","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{"id":"authItems","tag":"div","css":"amc-v-box auth-items"}],"css":"amc-v-box auth-items-box amc-hidden"},{"tag":"div","css":"amc-1px-line"}],"css":"amc-v-box amc-bg-white"},{"tag":"div","children":[{},{"id":"checkArea","tag":"div","css":"pd-lr amc-v-box"},{},{"id":"protocolArea","tag":"div","children":[{"id":"agree","tag":"label","children":[{"text":"{{agree}}","tag":"text"}],"css":"agree-label  amc-ellipsis-2-line font-m margin-r-xs"},{"id":"protocol","tag":"label","children":[{"text":"{{serve_protocol}}","tag":"text"}],"onclick":"showProtocol()","css":"font-m amc-theme-color amc-flex-1 amc-ellipsis-2-line"}],"css":"pd-lr protocol-area"},{"id":"container","tag":"div","children":[{"id":"confirmBtn","tag":"div","children":[{"id":"gifImg","tag":"embed","type":"MQPPayGifView","css":"btn-img amc-hidden"},{"id":"btnText","tag":"label","children":[{"text":"{{confirm_auth}}","tag":"text"}],"css":"amc-btn-text-color amc-font-super-l amc-btn-ellpsis"}],"onclick":"onSubmit()","css":"btn-primary amc-justify-center amc-align-center"}],"css":"pd-lr btn-box"}],"css":"amc-v-box"},{"id":"authSceneTipBox","tag":"div","children":[{"id":"authSceneTip","tag":"label","css":"auth-scene-tip"}],"css":"auth-scene-box amc-v-box amc-hidden"},{"id":"skipAuthBox","tag":"div","children":[{"tag":"label","children":[{"text":"暂不授权","tag":"text"}],"onclick":"onBack()","css":"amc-theme-color amc-text-center amc-font-m"}],"css":"skip-auth-box amc-hidden"},{},{"id":"insideTipBox","tag":"div","children":[{"id":"insideTip","tag":"label","css":"inside-tip amc-text-center amc-ellipsis-2-line"}],"css":"amc-v-box amc-flex-1 inside-tip-box amc-hidden"},{"tag":"div","css":"amc-iphone-x-pd-b"}],"css":"amc-v-box amc-scroll-flex"}],"onkeydown":"onKeyDown()","css":"amc-body"}]},"format":"JSON","tplVersion":"5.2.9"}