{"time":"0014","tplId":"WALLET-SEARCH@EverywhereService","publishVersion":"150603","tag":"WALLET-SEARCH","name":"EverywhereService","data":{"tag":"html","children":[{"tag":"head","children":[{"content":"text/html; charset=UTF-8","tag":"meta","http-equiv":"Content-Type"},{"tag":"style","children":[{"text":"body, div {\n            display: flex;\n        }\n        .body {\n            background-color: #FFFFFF;\n            margin: 0;\n            padding-left: 15px;\n            padding-right: 15px;\n            padding-top: 8px;\n            padding-bottom: 8px;\n        }\n       .cell {\n            display: flex;\n            flex: 1;\n       }\n       .big-img {\n           width: 120px;\n           height: 110px;\n           margin-right: 10px;\n       }\n       .container {\n           display: flex;\n           flex-direction: column;\n           flex: 1;\n       }\n       .title {\n           font-size: 16px;\n           font-weight: bold;\n           overflow: hidden;\n           text-overflow: ellipsis;\n           -webkit-line-clamp:2;\n           -webkit-box-orient:vertical;\n           display:-webkit-box;\n           margin-bottom: 2px;\n       }\n       .price-and-unit {\n           align-items: center;\n           margin-bottom: 2px;\n       }\n       .price {\n           font-size: 15px;\n           font-weight: bold;\n       }\n       .unit {\n           font-size: 12px;\n       }\n       .tags {\n           margin-top: 3px;\n           margin-bottom: 3px;\n           height: 19px;\n       }\n       .tag {\n           text-align: center;\n           font-size: 12px;\n           height: 17px;\n           overflow: hidden;\n           padding: 0 4px;\n           border: 1px solid #E6D8B8;\n           margin-right: 5px;\n           font-weight: 300;\n       }\n       .tag-text {\n           color: #E6D8B8;\n       }\n       .user-info {\n           align-items: center;\n       }\n       .user-name {\n           font-size: 12px;\n           color: #999999;\n           margin-right: 3px;\n       }\n       .user-gender{\n           width: 15px;\n           height: 15px;\n           margin-right: 3px;\n       }\n       .user-score{\n           position: relative;\n           align-items: center;\n           width: 40px;\n           height: 12px;\n       }\n       .user-scor-bg{\n           position: absolute;\n           width: 40px;\n           height: 12px;\n       }\n       .user-score-text {\n           z-index: 99;\n           position: absolute;\n           font-size: 9px;\n           left: 12px;\n           width: 28px;\n           height: 10px;\n           top: 1px;\n           text-align: center;\n           color: #04C9B3;\n       }\n       .brand-logo{\n           background-color: #BBA373;\n           padding: 0 3px;\n           border-radius: 2px;\n       }\n       .brand-logo-text {\n           font-size: 10px;\n           color: #ffffff;\n       }\n       .merchant-info {\n           display: none;\n       }","tag":"text"}],"type":"text/css"},{"tag":"script","children":[{"text":"var $ = function(sel) {\n        return document.getElementById(sel);\n    };\n\n    var addClass = function (node, className) {\n        node.className += (' ' + className + ' ');\n    }\n\n    var removeClass = function(node, className) {\n      var classNames = node.className.split(' ');\n\n      var newClassNames = [];\n      for (var i = 0, l = classNames.length; i < l; i++) {\n        if (classNames[i] != className) {\n          newClassNames.push(classNames[i]);\n        }\n      }\n      node.className = newClassNames.join(' ');\n    }\n    window.rpcData = null;\n\n    var load =  function() {\n        window.NODE = {\n            title : $('J-title'),\n            img : $('J-img'),\n            price : $('J-price'),\n            unit : $('J-unit'),\n            tags : $('J-tags'),\n            userInfo: $('J-user-info'),\n            merchantInfo: $('J-merchant-info'),\n            merchantName: $('J-merchant-name'),\n            userName : $('J-user-name'),\n            userGender : $('J-user-gender'),\n            userScore : $('J-user-score')\n        }\n\n        $(\"J-cell\").onclick = function() {\n            var url = 'alipays://platformapi/startapp?appId=20000926&appClearTop=false&sourceId=globalsearch&page=item-detail&itemId=' + rpcData.biz_id + (rpcData.biz_search_tag ? (\"&searchTag=\" + rpcData.biz_search_tag) : \"\") + '&shopId=' + rpcData.shop_id + '&spId=' + rpcData.sp_id + '&ttb=auto&pd=NO';\n            document.openURL(url);\n        }\n    }\n    var maxWords = function(str, max) {\n        if (str.length <= max) {\n            return str;\n        } else {\n            return str.substr(0, max) + '...';\n        }\n    }\n\n    document.onreload = function(data) {\n        if (document.platform == \"iOS\") {\n            data = data[\"ext\"];\n        }\n        rpcData = data;\n\n        NODE.title.innerText = data.title || \"\";\n        NODE.img.src = data.img;\n        NODE.price.innerText = data.price ? '￥' + data.price : \"\";\n        NODE.unit.innerText = data.price_unit || \"\";\n        NODE.tags.innerHTML = \"\";\n        if (data.tags && data.tags.length) {\n            NODE.tags.style.display = 'flex';\n            for (var i = 0, l = data.tags.length; i < l; i++) {\n                var tag = document.createElement(\"div\");\n                tag.className = \"tag\";\n                var tagText = document.createElement(\"label\");\n                tagText.className = \"tag-text\";\n                tagText.innerText = data.tags[i] || \"\";\n                tag.appendChild(tagText);\n                NODE.tags.appendChild(tag);\n            }\n        } else {\n            NODE.tags.style.display = 'none';\n        }\n\n        if (data.serviceSource == 'MERCHANT') {\n            // 商户\n            NODE.merchantInfo.style.display = 'flex';\n            NODE.userInfo.style.display = 'none';\n            NODE.merchantName.innerText = data.serviceName ? \"该服务来自\" + data.serviceName : \"\";\n        } else {\n            // 个人\n            NODE.merchantInfo.style.display = 'none';\n            NODE.userInfo.style.display = 'flex';\n\n            if (data.nick_name && data.nick_name != \"\") {\n                NODE.userName.innerText = maxWords(data.nick_name, 7);\n            } else if (data.name && data.name != \"\") {\n                NODE.userName.innerText = maxWords(data.name, 7);\n            }\n            if (data.gender.toUpperCase() == 'F') {\n                NODE.userGender.src = \"https://zos.alipayobjects.com/rmsportal/PVOWwTQdrDRkUcrhMiNj.png\";\n            } else if (data.gender.toUpperCase() == 'M'){\n                NODE.userGender.src = \"https://zos.alipayobjects.com/rmsportal/wcPFeoDvpfiMmNPpHlvv.png\";\n            }\n            if (data.creditScore && data.creditScore * 1 > 0) {\n                NODE.userScore.innerText = data.creditScore + \"分\";\n                NODE.userScore.style.display = 'flex';\n                \n                if (document.platform == \"iOS\") {\n                    NODE.userScore.style.top = \"1px\";\n                } else {\n                    NODE.userScore.style.top = \"-1px\";\n                }\n            } else {\n                NODE.userScore.style.display = 'none';\n            }\n        }\n    }","tag":"text"}],"type":"text/javascript"}]},{"onload":"load();","tag":"body","children":[{"id":"J-cell","tag":"div","children":[{"id":"J-img","tag":"img","src":"","css":"big-img"},{"tag":"div","children":[{"id":"J-title","tag":"label","css":"title"},{"tag":"div","children":[{"id":"J-price","tag":"label","css":"price"},{"id":"J-unit","tag":"label","css":"unit"}],"css":"price-and-unit"},{"id":"J-tags","tag":"div","css":"tags"},{"id":"J-user-info","tag":"div","children":[{},{"id":"J-user-name","tag":"label","css":"user-name"},{"id":"J-user-gender","tag":"img","src":"https://zos.alipayobjects.com/rmsportal/VwUbGiXNwxmqMPLvIRZf.png","css":"user-gender"},{"tag":"div","children":[{"tag":"img","src":"https://zos.alipayobjects.com/rmsportal/yzrbYjdbmNJKIezWGkEl.png","css":"user-scor-bg"},{"id":"J-user-score","tag":"label","css":"user-score-text"}],"css":"user-score"}],"css":"user-info"},{"id":"J-merchant-info","tag":"div","children":[{"tag":"div","children":[{"tag":"label","children":[{"text":"品牌","tag":"text"}],"css":"brand-logo-text"}],"css":"brand-logo"},{"id":"J-merchant-name","tag":"label","css":"service-name"}],"css":"merchant-info"}],"css":"container"}],"css":"cell"}],"css":"body"}]},"format":"JSON","tplVersion":"5.1.9"}