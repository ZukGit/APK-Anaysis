{"time":"0007","tplId":"WALLET-BILL@BLPaymentHelper","publishVersion":"150603","tag":"WALLET-BILL","name":"BLPaymentHelper","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"style","children":[{"text":".msg-wrap {\n        padding: 9px 9px 0;\n        flex: 1;\n        flex-direction: column;\n        color: #000;\n        border-radius: 5px;\n    }\n    .msg-header{\n        flex: 1;\n        flex-direction: column;\n    }\n    .msg-status {\n        font-size: 17px;\n                text-overflow:ellipsis;\n                overflow:hidden;\n                white-space: nowrap;\n                -webkit-line-clamp:1;\n                -webkit-box-orient:vertical;\n                display:-webkit-box;\n    }\n    .msg-date {\n        padding-bottom: 4px;\n        font-size: 12px;\n        color: #A5A5A5;\n    }\n    .msg-sum {\n        flex: 1;\n        padding: 17px 0 9px 0;\n        flex-direction: column;\n    }\n    .msg-sum-tip {\n        font-size: 14px;\n        color: #888888;\n        text-align: center;\n    }\n    .msg-sum-text {\n        font-size: 32px;\n        color: #333333;\n        text-align: center;\n    }\n    .msg-info {\n        flex: 1;\n        flex-direction: column;\n        padding-top: 9px;\n        font-size: 14px;\n        color: #888888;\n    }\n    .msg-info-inner {\n        flex: 1;\n        flex-direction: column;\n    }\n    .msg-tip {\n        padding-bottom: 10px;\n    }\n    .msg-tip-fail {\n        flex: 1;\n        font-size: 14px;\n        color: #F4333C;\n    }\n    .msg-tip-info {\n        flex: 1;\n        font-size: 14px;\n        color: #00AAEE;\n    }\n    .msg-item {\n        align-items: flex-start;\n        padding-bottom: 9px;\n    }\n    .item-title {\n        color: #333333;\n    }\n    .item-content-wrap {\n        flex: 1;\n        flex-direction: column;\n    }\n    .item-content {\n        flex: 1;\n        color: #888888;\n    }\n    .item-content-tip {\n        flex: 1;\n        color: #ccc;\n        padding-top: 9px;\n    }\n    .msg-link {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        flex: 1;\n        color: #000;\n        padding: 14px 0;\n    }\n\n    .msg-link-goto {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        flex: 1;\n        color: #000;\n        padding: 14px 0;\n    }\n\n    .msg-arrow {\n        width: 9px;\n        height: 13px;\n        padding-right:14px;\n    }\n    .msg-split {\n        background-color: #ddd;\n        height: 1PX;\n    }\n    .action-divider-box {\n    \tpadding: 14px 0;\n        width: 1PX;\n    }\n    .action-divider {\n        background-color: #ddd;\n        height: 20px;\n        width: 1PX;\n    }\n    .msg-ad {\n        align-self: stretch;\n    }\n    .img-wrap {\n        display: none;\n        padding-top: 10px;\n        padding-bottom: 10px;\n        flex-direction: column;\n    }\n    .msg-link-container {\n    \tdisplay: flex;\n        flex-direction: row;\n    }","tag":"text"}]},{"tag":"script","children":[{"text":"function makeOnClickCallback(url) {\n  return function() {\n    document.openURL(url);\n  };\n}\nfunction init() {\n    var Node = {\n        cell: document.querySelector('.msg-common'),\n        status: document.querySelector('.msg-status'),\n        date: document.querySelector('.msg-date'),\n        sumTip: document.querySelector('.msg-sum-tip'),\n        sum: document.querySelector('.msg-sum-text'),\n        info: document.querySelector('.msg-info-inner'),\n        infoTip: document.querySelector('.msg-tip-info'),\n        failTip: document.querySelector('.msg-tip-fail'),\n        ad: document.querySelector('.msg-ad'),\n        imgArea: document.querySelector('.img-wrap'),\n        msgLinkContainer:document.querySelector('.msg-link-container')\n    };\n\n    document.onreload = function (data) {\n        Node.status.innerText = data.status || '';\n        Node.date.innerText = data.date || '';\n        Node.sumTip.innerText = data.amountTip || '';\n        if (data.unit) {\n            Node.sum.innerText = data.money + '<font size=\"14\">' + data.unit + '</font>';\n        } else {\n            Node.sum.innerText = data.money;\n        }\n        Node.infoTip.innerText = data.infoTip || '';\n        Node.failTip.innerText = data.failTip || '';\n\n        Node.info.innerHTML = '';\n        Node.msgLinkContainer.innerHTML = '';\n        for (var i = 0; i < data.content.length; i++) {\n            var content = data.content[i];\n            var item = document.createElement('div');\n            item.className = 'msg-item';\n            Node.info.appendChild(item);\n            if (content.title) {\n                var subtitle = document.createElement('label');\n                subtitle.className = 'item-title';\n                subtitle.innerText = content.title;\n              \tsubtitle.setAttribute(\"emoji\", \"true\");\n                item.appendChild(subtitle);\n            }\n\n            if (content.content) {\n                var subcontentWrap = document.createElement('div');\n                subcontentWrap.className = 'item-content-wrap';\n                item.appendChild(subcontentWrap);\n\n                var subcontent = document.createElement('label');\n                subcontent.className = 'item-content';\n                subcontent.innerText = content.content;\n              \tsubcontent.setAttribute(\"emoji\", \"true\");\n                subcontentWrap.appendChild(subcontent);\n\n                if (content.tip) {\n                    var subTip = document.createElement('label');\n                    subTip.className = 'item-content-tip';\n                    subTip.innerText = content.tip;\n                  \tsubTip.setAttribute(\"emoji\", \"true\");\n                    subcontentWrap.appendChild(subTip);\n                }\n            }\n        }\n        var actualActionLen = 0;\n        if (data.actions && data.actions.length > 0) {\n          for (var i = 0, len = data.actions.length; i < len; i++) {\n            var action = data.actions[i];\n            if (!action || (!action.name) || action.name == '' \n                || (!action.url) || action.url == '') {\n                continue;\n            }\n            try {\n                var actionTitle = document.createElement('label');\n                    actionTitle.className = 'msg-link-title';\n                    actionTitle.innerText = action.name;\n                var actionLink = document.createElement('div');\n                    actionLink.className = 'msg-link';\n                    actionLink.appendChild(actionTitle);\n                    actionLink.onclick = makeOnClickCallback(action.url);\n                Node.msgLinkContainer.appendChild(actionLink);\n                if (i != len - 1) {\n                  var actionDividerBox = document.createElement('div');\n                    actionDividerBox.className = 'action-divider-box';\n                    var actionDivider = document.createElement('div');\n                    actionDivider.className = 'action-divider';\n                    actionDividerBox.appendChild(actionDivider);\n                    Node.msgLinkContainer.appendChild(actionDividerBox);\n                }\n                actualActionLen++;\n            } catch (e) {\n                \n            }\n          }\n        }\n        if (actualActionLen == 0 && data.goto && data.goto != '') {\n            var actionTitle = document.createElement('label');\n                actionTitle.className = 'msg-link-title';\n                actionTitle.innerText = '查看详情';\n            var actionImg = document.createElement('img');\n                actionImg.className = 'msg-arrow';\n                actionImg.src = 'android-phone-mobilecommon-ui/com.alipay.mobile.ui/table_arrow';\n            var msgLink = document.createElement('div');\n                msgLink.className = 'msg-link-goto';\n                msgLink.appendChild(actionTitle);\n                msgLink.appendChild(actionImg);\n                msgLink.onclick = function (e) {\n                \tdocument.openURL(data.goto);\n            \t}\n                Node.msgLinkContainer.appendChild(msgLink);\n        }\n\n        var hasPic = false;\n        if (data.ad) {\n            for (var j = 0; j < data.ad.length; j++) {\n                var ad = data.ad[j];\n                if (ad.type == \"pic\") {\n                    if (ad.content && ad.content != '') {\n                        hasPic = true;\n                        Node.ad.src = ad.content;\n                        Node.ad.onclick = function (e) {\n                            document.openURL(ad.action);\n\t\t\t                document.submit({\"action\":\"remoteLog\"})\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n        if (!hasPic) {\n            Node.imgArea.style.display = 'none';\n            document.getElementById(\"img-split\").style.display = 'none';\n        } else {\n            Node.imgArea.style.display = 'flex';\n            document.getElementById(\"img-split\").style.display = 'flex';\n            Node.ad.style.height = (window.innerWidth-18)*270.0/654.0 +\"px\";\n        }\n    }\n}","tag":"text"}]}]},{"onload":"init();","tag":"body","children":[{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","emoji":"true","css":"msg-status"},{"tag":"label","emoji":"true","css":"msg-date"},{"tag":"div","children":[{"tag":"label","emoji":"true","css":"msg-sum-tip"},{"tag":"label","emoji":"true","css":"msg-sum-text"}],"css":"msg-sum"}],"css":"msg-header"},{"tag":"div","css":"msg-split"},{"tag":"div","children":[{"tag":"div","children":[{"tag":"label","emoji":"true","css":"msg-tip-fail"}],"css":"msg-tip"},{"tag":"div","css":"msg-info-inner"},{"tag":"div","children":[{"tag":"label","emoji":"true","css":"msg-tip-info"}],"css":"msg-tip"}],"css":"msg-info"},{"id":"img-split","tag":"div","css":"msg-split"},{"tag":"div","children":[{"contentmode":"ScaleAspectFill","tag":"img","src":"","defaultvalue":"android-phone-wallet-messageboxapp/com.alipay.android.phone.messageboxapp/msg_ad_default","css":"msg-ad"}],"css":"img-wrap"},{"tag":"div","css":"msg-split"},{"tag":"div","css":"msg-link-container"}],"css":"msg-wrap"}],"css":"msg-common"}]},"format":"JSON","tplVersion":"5.2.0"}