{"time":"0001","tplId":"QUICKPAY@cashier-safeprotect-pwd","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-safeprotect-pwd","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"try{if(amc.fn.isString(amc.rpcData)){amc.rpcData=JSON.parse(amc.rpcData)}}catch(e){}var rpc=amc.rpcData;var getTag=amc.fn.getById;var hide=amc.fn.hide;var show=amc.fn.show;var loadingBlueGif=amc.path+\"alipay_msp_loading_blue.gif\";var successGif=amc.path+\"alipay_msp_success_blue.gif\";var spasswordPay=rpc.spasswordPay;var successTxt=rpc.successText||\"{{safepwd_verify_complete}}\";var payTxt=rpc.doingText||\"{{safepwd_verifying}}\";var btnText=rpc.btnText||\"{{confirm_btn}}\";var tips=rpc.tips;var gifTag;var backAction=\"\";function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var a=rpc.useBackImg?amc.res.arrowLeft:amc.res.close;if(rpc.backAction){backAction=rpc.backAction}else{backAction=\"loc:exit\"}var b=amc.fn.iNav(a,\"{{input_pwd}}\",null,null,onBack,null);getTag(\"body\").insertBefore(b,getTag(\"iLine\"));gifTag=getTag(\"pwdLoadGif\");getTag(\"loadTxt\").innerText=payTxt;getTag(\"payBtn\").innerText=btnText;showPwdInput()}function showPwdInput(){if(tips){show(\"tips\");getTag(\"tips\").innerText=tips}else{hide(\"tips\")}var b=getTag(\"password\");var a=getTag(\"spassword\");if(spasswordPay){hide(b);show(a);getTag(\"spwd\").focus()}else{hide(a);show(b);getTag(\"pwd\").focus()}}function submitPay(b,a){hide(\"pwdBox\");hide(\"tips\");show(\"pwdLoad\");gifTag.src=loadingBlueGif;b.blur();a.action=rpc.action||{};a.action[\"neec\"]=\"6004\";a.action[\"loadtxt\"]=\"\";a.action[\"params\"]=rpc.params;document.asyncSubmit(a,function(c){if(c.status===\"0001\"){getTag(\"loadTxt\").innerText=c.successText||successTxt;gifTag.src=successGif}else{if(c.status===\"0002\"){resetPwd(true)}else{if(c.status===\"0000\"){resetPwd(false)}else{if(c.status===\"0902\"){resetPwd(true);forgetPwd()}}}}})}function resetPwd(a){gifTag.src=\"\";hide(\"pwdLoad\");show(\"pwdBox\");getTag(\"payBtn\").disabled=true;var b=spasswordPay?getTag(\"spwd\"):getTag(\"pwd\");b.value=\"\";if(!spasswordPay){onPwdInput()}if(!a||amc.isAndroid){b.focus()}}function onPwdInput(){var a=getTag(\"pwd\");if(a.value.length>0){getTag(\"payBtn\").disabled=false;getTag(\"payBtn\").style.color=\"#108ee9\"}else{getTag(\"payBtn\").disabled=true;getTag(\"payBtn\").style.color=\"#d2d2d2\"}}function onSpwdInput(){var c=getTag(\"spwd\");if(c.value.length>=6){var b=c.value||\"\";var a={spwd:b};a.encryptType=\"RSA\";var d={};d.param=a;submitPay(c,d)}}function onPasswordPay(){var c=getTag(\"pwd\");if(c.value.length>0){var a={};a.pwd=c.value||\"\";a.encryptType=\"RSA\";var b={};b.param=a;submitPay(c,b)}}function onBack(){document.submit({action:{name:backAction}})}function forgetPwd(){var b=\"\";if(rpc.logon_id){b=\"&loginId=\"+rpc.logon_id}var a=\"alipays://platformapi/startApp?appId=20000013&pwdType=phonePassword\"+b;document.submit({action:{name:\"loc:openurl('\"+a+\"','0')\"}})}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".pwd-btn-text {\n    color:#d2d2d2;\n}\n.loadtxt-box {\n    display: flex;\n    flex-direction: column;\n}","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"iLine","tag":"div","css":"amc-1px-title-line"},{"id":"mainBody","tag":"div","children":[{},{"id":"tipsBox","tag":"div","children":[{"id":"tips","tag":"label","css":"amc-flex-1 amc-text-center amc-font-m"}],"css":"amc-flex-center amc-pd-lr amc-pd-t"},{"id":"pwdBox","tag":"div","children":[{},{"id":"password","tag":"div","children":[{"tag":"div","children":[{},{"tag":"div","children":[{"tag":"div","css":"amc-abs-space-h-m"},{"id":"pwd","placeholder":"{{alipaypwd}}","tag":"embed","value":"","src":"paypwd","type":"MQPPayPwdView","css":"amc-input amc-spwd-height","oninput":"onPwdInput()"}],"css":"amc-cell-m-box"},{"tag":"div","css":"amc-cell-v-line"},{},{"tag":"div","children":[{"id":"payBtn","tag":"label","children":[{"text":"{{pay}}","tag":"text"}],"css":"pwd-btn-text amc-font-xxl amc-flex-1 amc-ellipsis amc-text-center","disabled":"disabled"}],"onclick":"onPasswordPay()","css":"amc-flex-center amc-pwd-check-btn-w"}],"css":"amc-spwd-box"}],"css":"amc-pd-t"},{},{"id":"spassword","tag":"div","children":[{"id":"spwd","tag":"embed","value":"","src":"payspwd","type":"MQPPayPwdView","css":"amc-pwd-input amc-spwd-height","oninput":"onSpwdInput()"}],"css":"amc-spwd-box amc-margin-t amc-hidden"},{"tag":"div","children":[{},{"tag":"div","children":[{"tag":"label","children":[{"text":"{{forget_pwd}}","tag":"text"}],"onclick":"forgetPwd()","css":"amc-theme-color amc-font-m amc-flex-1 amc-text-right amc-ellipsis-2-line"}],"css":"amc-pd-t-s amc-flex-1"}]}],"css":"amc-pd-lr amc-v-box"},{},{"id":"pwdLoad","tag":"div","children":[{"tag":"div","css":"amc-flex-space-1"},{"id":"pwdLoadGif","tag":"embed","type":"MQPPayGifView","css":"amc-load-img"},{"tag":"div","children":[{"id":"loadTxt","tag":"label","children":[{"text":"{{paying}}","tag":"text"}],"css":"amc-font-l-white amc-flex-1 amc-text-center amc-ellipsis"}],"css":"amc-pd-t-l loadtxt-box amc-pd-lr"},{"tag":"div","css":"amc-flex-space-2"}],"css":"amc-loading-box"}],"css":"amc-v-box amc-flex-1"}],"onkeydown":"onKeyDown()","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.2.7"}