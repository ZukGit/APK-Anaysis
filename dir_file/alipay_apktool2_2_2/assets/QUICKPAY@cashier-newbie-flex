{"time":"0005","tplId":"QUICKPAY@cashier-newbie-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-newbie-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","src":"AlipaySDK.bundle/amc-usq.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"amc.fn.spmPageCreate(\"a283.b4031\");var getTag=amc.fn.getById;var rpc=amc.rpcData;var show=amc.fn.show;var create=amc.fn.create;var showAggr=(rpc.show_aggr===\"Y\");var serverDefinedProtocol=rpc.protocolName&&rpc.protocolUrl;var helpQuery=rpc.helpQuery||\"\";var helpUrl=rpc.helpUrl||\"\";var isResume=false;function init(){try{initUI();initUsq();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUsq(){try{var a=amc.fn.getUserId();amc.ext.processCashierCfgDate(a,rpc.cashierCfgData)}catch(b){amc.fn.logError(\"usq\",\"初始化答题失败\"+b)}}function initUI(){var d=true;if(d){amc.fn.spmExposure(\"a283.b4031.c9685.d17357\")}var g=amc.fn.navBack(true,\"{{pay_detail}}\",null,d?amc.res.help:null,onBack,d?onHelp:null);getTag(\"body\").insertBefore(g,getTag(\"mainBody\"));amc.fn.spmExposure(\"a283.b4031.c9685.d17356\");getTag(\"navImgR\")&&(getTag(\"navImgR\").alt=\"{{help}}\");if(rpc.showLogo){var o=amc.path+\"alipay_msp_logo_large\";var l=getTag(\"logo\");var c=rpc.logoUrl||o;l.failureValue=o;l.src=c;show(l)}if(rpc.loginId){var q=getTag(\"accountTxt\");q.innerText=rpc.loginId;show(q)}if(rpc.cost){var a=getTag(\"totalCost\");getTag(\"totalCostImg\").src=amc.path+\"alipay_msp_rmb\";if(amc.isIOS){getTag(\"totalCostImg\").style.marginTop=\"-2px\"}a.innerText=rpc.cost;a.style.maxWidth=window.innerWidth-(30+30);amc.fn.show(\"totalCostBox\")}var j=amc.specs.bottomHeight||0;var f=2+j;for(var p=0;rpc.detail&&p<rpc.detail.length;p++){var m=rpc.detail[p];createDetail(m.info,m.price,m.isDiscount)}if(rpc.productDetailKey){createDetail(rpc.productDetailKey,rpc.productDetail)}if(rpc.product){createDetail(rpc.order||\"{{order_info}}\",rpc.product)}if(rpc.propagate&&rpc.propagate.title){createPropagate(rpc.propagate);if(rpc.propagate.actTitle){f+=37}else{f+=54}}if(showAggr){if(serverDefinedProtocol){getTag(\"protocolName\").innerText=rpc.protocolName}show(\"protocol\");f+=35}if(rpc.tip){getTag(\"tip\").innerText=rpc.tip;show(\"tipBox\");f+=32}var b=getTag(\"payments\");for(var p=0;rpc.buttonList&&p<rpc.buttonList.length;p++){createBtn(b,rpc.buttonList[p],p===0,p);f+=58}var n=amc.specs.bodyHeight;if(rpc.gonggao){var t=create(\"div\");t.className=\"marquee pd-l\";var r=create(\"img\",\"marquee-img-speaker\",t);r.src=amc.path+\"alipay_msp_speaker\";var k=create(\"marquee\",\"marquee\",t);k.innerText=rpc.gonggao||\"\";var s=create(\"div\",\"pd-r\",t);var h=create(\"img\",\"marquee-img-close\",s);h.src=amc.path+\"alipay_msp_marquee_close\";k.style.width=window.innerWidth-74;getTag(\"body\").insertBefore(t,getTag(\"mainBody\"));f+=36;n-=36;s.onclick=function(){amc.fn.hide(t)}}getTag(\"scrollableBox\").style.maxHeight=amc.specs.bodyHeight-f;getTag(\"mainBody\").style.height=n;var e=create(\"div\",\"pd-box\",getTag(\"scrollableBox\"))}document.viewDidAppear=function(){if(isResume){amc.fn.spmExposureResume()}else{isResume=true}};function createDetail(d,f,b){if(!d&&!f){return}var e=create(\"div\",\"info-box amc-align-cetner\",getTag(\"detailBox\"));var c=null;if(d){c=create(\"label\",\"info-text info-key amc-ellipsis\"+(b?\" highlight\":\"\"),e);c.innerText=d}var g=null;if(f){g=create(\"label\",\"info-text info-value amc-flex-1 amc-ellipsis\"+(b?\" highlight\":\"\"),e);g.innerText=f}if(c&&g){var a=calculateFontWidth(f);if(a*(16+1)<((window.innerWidth-40)/2)){c.className+=\" amc-flex-1\";g.style.flex=\"0\"}else{c.className+=\" info-k-w-limit\"}}else{if(c){c.className+=\" amc-flex-1\"}else{if(g){g.style.marginLeft=\"40%\"}}}}function createBtn(p,h,n,a){if(!p||!h||!h.name||!h.action){return}var k=h.btnTip?\"btn-height-l\":\"btn-height\";var o=n?\"btn-primary\":\"btn-secondary\";var j=n?\"btn-primary-color\":\"btn-secondary-color\";var d=\"btnId\"+a;var q=\"loadingId\"+a;var m=create(\"div\",o+\" amc-justify-center amc-align-center margin-b \"+k);var g=create(\"img\",\"amc-loading-img amc-hidden\",m);g.src=amc.res.indicator;g.id=q;if(n){if(amc.isAndroid){g.src=amc.path+\"alipay_msp_indicator_white_loading\"}else{g.className=\"amc-loading-img amc-text-white-clolor amc-hidden\"}}var c=create(\"div\",o+\" amc-v-box amc-justify-center amc-flex-1 \"+k,m);c.id=d;var l=create(\"div\",\"amc-align-center amc-justify-center\",c);var e=create(\"label\",j+\" btn-text-font amc-ellipsis\",l);e.innerText=h.name;if(h.discount){var i=create(\"img\",\"discount-icon\",l);i.src=amc.path+\"alipay_msp_hui_orange\";e.style.marginLeft=24}if(h.btnTip){var f=create(\"div\",\"btn-tip-box amc-justify-center\",c);var b=create(\"label\",j+\" amc-flex-1 amc-text-center btn-tip amc-ellipsis\",f);b.innerText=h.btnTip}c.onclick=function(){var r={action:{name:h.action,loadtxt:\"\"}};document.asyncSubmit(r,function(s){amc.fn.shouldShowBtnIndicator(s,d,q)});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},d,q)};p.appendChild(m)}function calculateFontWidth(d){if(!d){return 0}var b=0;var c=/^[A-Za-z0-9\\.\\(\\)]*$/;for(var a=0;a<d.length;a++){if(c.test(d[a])){b+=0.45}else{b++}}return Math.round(b)}function createPropagate(a){var b=getTag(\"propagateBox\");if(a.actTitle){createPropagateWithButton(b,a)}else{createPropagateWithPureText(b,a)}show(b)}function createPropagateWithButton(c,b){var e=create(\"label\",\"amc-flex-1 amc-ellipsis propagate-text\",c);e.innerText=b.title;var a=create(\"div\",\"propagate-btn\",c);var d=create(\"label\",\"amc-flex-1 amc-ellipsis propagate-btn-text\",a);d.innerText=b.actTitle;a.onmousedown=function(){a.style.backgroundColor=\"#108ee9\";d.style.color=\"#fff\"};a.onmouseup=function(){a.style.backgroundColor=\"#fff\";d.style.color=\"#108ee9\"};bindPropagateClickAction(a,b)}function createPropagateWithPureText(b,a){var c=create(\"label\",\"amc-flex-1 amc-ellipsis-2-line propagate-text\",b);c.innerText=a.title;bindPropagateClickAction(b,a)}function bindPropagateClickAction(b,a){if(!b||!a||!a.action){return}b.onclick=function(){var c={action:{name:a.action,loadtxt:\"\"}};c.param=a.param;if(c.param){c.param[\"first_enter_cashier\"]=c.param[\"first_enter_cashier\"]||false}document.submit(c);if(a.dlg){setTimeout(function(){showDlg(a.dlg)},1000)}}}function showDlg(a){if(!a||!a.btnRight||!a.dlgTxt||!a.btnLeft||!a.btnRightAction){return}getTag(\"dlgTxt\").innerText=a.dlgTxt;getTag(\"btnLeft\").innerText=a.btnLeft;getTag(\"btnRight\").innerText=a.btnRight;getTag(\"btnRight\").onclick=function(){var b={action:{name:a.btnRightAction}};document.submit(b);getTag(\"dlg\").close()};getTag(\"dlg\").showModal()}function showProtocol(){if(serverDefinedProtocol){document.submit({action:{name:\"loc:openweb('\"+rpc.protocolUrl+\"', '\"+(rpc.protocolTitle||\"{{serve_protocol}}\")+\"')\"}});return}var a=rpc.protocols||[{text:\"{{pcredit_protocol}}\",url:\"https://ds.alipay.com/credit/infoContract.htm\"},{text:\"{{pcredit_user_protocol}}\",url:\"https://ds.alipay.com/credit/hbContract.htm\"}];amc.fn.showProtocolList(a)}function onHelp(){amc.fn.spmClick(\"a283.b4031.c9685.d17357\");var a=\"https://csmobile.alipay.com/router.htm?scene=app_paymentpage_no\";if(helpUrl){a=helpUrl}else{if(helpQuery){a=(helpQuery.indexOf(\"&\")===0)?a+helpQuery:a+\"&\"+helpQuery}}amc.fn.logCount(\"help\",\"newbie\");document.submit({action:{name:\"loc:openweb('\"+a+\"', '{{help}}')\"}})}function onBack(){amc.fn.spmClick(\"a283.b4031.c9685.d17356\");var a=function(){amc.fn.spmPageDestroy(\"a283.b4031\");amc.fn.exit()};try{amc.ext.processCashierCfgExit(a)}catch(b){amc.fn.logError(\"usq\",\"退出答题异常\"+b);a()}}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".marquee-img-speaker {\n        height: 16px;\n        width: 16px;\n        margin-right: 6px;\n    }\n\n    .marquee-img-close {\n        height: 16px;\n        width: 16px;\n        margin-left: 6px;\n    }\n\n    .marquee-text {\n        margin-left: 6px;\n        margin-right: 6px;\n    }\n\n    .marquee {\n        align-items: center;\n        opacity: 0.89;\n        background-color: #fefcec;\n        font-size: 14px;\n        color: #f76a24;\n        white-space: nowrap;\n        text-overflow: marquee;\n        overflow: hidden;\n        height: 36px;\n        max-height: 36px;\n        min-height: 36px;\n    }\n\n    .logo {\n        height: 45px;\n        width: 45px;\n        margin-top: 30px;\n    }\n\n    .account-text {\n        font-size: 17px;\n        margin-top: 9px;\n    }\n\n    .margin-t {\n        margin-top: 15px;\n    }\n\n    .pd-lr {\n        padding-left: 15px;\n        padding-right: 15px;\n    }\n\n    .pd {\n        padding: 15px;\n    }\n\n    .info-text {\n        font-size: 16px;\n    }\n\n    .info-key {\n        color: #777;\n    }\n\n    .info-value {\n        text-align: right;\n        margin-left: 5px;\n    }\n\n    .info-box {\n        padding-bottom: 15px;\n    }\n\n    .info-k-w-limit {\n        max-width: 40%;\n    }\n\n    .total-cost {\n        font-size: 36px;\n        max-height: 43px;\n    }\n\n    .total-cost-box {\n        height: 43px;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .total-cost-img {\n        height: 50px;\n    }\n\n    .protocol-link {\n        margin-left: 5px;\n    }\n\n    .margin-t-l {\n        margin-top: 20px;\n    }\n\n    .tip {\n        color: #777;\n        font-size: 14px;\n    }\n\n    .btn-secondary {\n        background-color: #fff;\n        color: #000;\n        border: 1PX #ddd solid;\n        border-radius: 5px;\n        font-size: 20px;\n    }\n\n    .btn-height {\n        height: 43px;\n        max-height: 43px;\n        min-height: 43px;\n    }\n\n    .btn-height-l {\n        height: 48px;\n        max-height: 48px;\n        min-height: 48px;\n    }\n\n    .btn-secondary:active {\n        background-color: #ddd;\n    }\n\n    .btn-secondary-color {\n        color: #000;\n    }\n\n    .btn-primary-color {\n        color: #fff;\n    }\n\n    .btn-text-font {\n        font-size: 18px;\n    }\n\n    .btn-primary {\n        background-color: #108ee9;\n        border: 0;\n        border-radius: 4px;\n        color: #fff;\n        font-size: 20px;\n        flex: 1.0;\n    }\n\n    .btn-primary:active {\n        background-color: #1284D6;\n        color: #fff;\n    }\n\n    .discount-icon {\n        height: 16px;\n        width: 16px;\n        margin-left: 8px;\n    }\n\n    .shade {\n        margin-top: -21px;\n        height: 21px;\n        background-color: #f5f5f9;\n        opacity: 0.90;\n    }\n\n    .margin-b {\n        margin-bottom: 15px;\n    }\n\n    .btn-text {\n        font-weight: bold;\n        color: #108ee9;\n        margin: 15px 0;\n    }\n\n    .btn-vertical-line {\n        width: 1px;\n        align-self: stretch;\n        margin: 7px 0;\n        background-color: #e5e5e5;\n    }\n\n    .dlg-title {\n        -webkit-line-clamp: 4;\n        -webkit-box-orient: vertical;\n        display: -webkit-box;\n    }\n\n    .propagate-btn {\n        margin-left: 5px;\n        border: 1px #108ee9 solid;\n        border-radius: 2px;\n        padding: 2.5px 4px;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .propagate-btn-text {\n        color: #108ee9;\n        font-size: 14px;\n        text-align: center;\n        max-width: 90px;\n    }\n\n    .propagate-text {\n        font-size: 16px;\n        color: #000;\n    }\n\n    .pd-box {\n        height: 21px;\n    }\n\n    .pd-l {\n        padding-left: 15px;\n    }\n\n    .pd-r {\n        padding-right: 15px;\n    }\n\n    .btn-tip-box {\n        padding-left: 5px;\n        padding-right: 5px;\n        margin-top: 3px;\n    }\n\n    .btn-tip {\n        font-size: 11px;\n    }","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{},{"id":"mainBody","tag":"div","children":[{"tag":"div","css":"amc-1px-line"},{},{"id":"scrollableBox","tag":"div","children":[{},{"id":"logoBox","tag":"div","children":[{"id":"logo","tag":"img","css":"logo amc-hidden"},{"id":"accountTxt","tag":"label","css":"amc-ellipsis account-text amc-hidden"}],"css":"amc-v-box amc-align-center"},{"id":"totalCostBox","tag":"div","children":[{"id":"totalCostImg","tag":"img","css":"total-cost-img"},{"id":"totalCost","tag":"label","css":"total-cost amc-text-center amc-ellipsis"}],"css":"total-cost-box margin-t-l amc-hidden"},{},{"id":"detailBox","tag":"div","css":"amc-flex-1 amc-v-box margin-t-l"}],"css":"amc-v-box amc-bg-white pd-lr amc-scroll"},{"tag":"div","css":"amc-1px-line"},{},{"tag":"div","css":"shade"},{},{"tag":"div","children":[{"id":"propagateBox","tag":"div","css":"amc-align-center margin-b amc-hidden"},{},{"id":"protocol","tag":"div","children":[{"id":"agree","tag":"label","children":[{"text":"{{pay_agree}}","tag":"text"}],"css":"info-text info-key info-k-w-limit"},{"id":"protocolName","tag":"label","children":[{"text":"{{serve_protocol}}","tag":"text"}],"onclick":"showProtocol()","css":"amc-flex-1 info-text protocol-link amc-theme-color amc-ellipsis"}],"css":"amc-hidden margin-b"},{},{"id":"payments","tag":"div","css":"amc-v-box"},{},{"tag":"div","css":"amc-flex-1"},{"id":"tipBox","tag":"div","children":[{"id":"tip","tag":"label","css":"amc-flex-1 amc-ellipsis tip amc-text-center"}],"css":"amc-justify-center pd-b amc-hidden"},{"tag":"div","css":"amc-iphone-x-pd-b"}],"css":"amc-v-box pd-lr amc-flex-1"}],"css":"amc-v-box"},{"id":"dlg","tag":"dialog","children":[{"id":"dlgTxt","tag":"label","css":"amc-font-m amc-text-center amc-margin dlg-title"},{"tag":"div","children":[{"tag":"div","css":"amc-adapt-line"},{"tag":"div","children":[{"id":"btnLeft","tag":"label","onclick":"getTag('dlg').close();","css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line"},{"tag":"div","css":"btn-vertical-line"},{"id":"btnRight","tag":"label","css":"btn-text amc-font-xxl amc-flex-1 amc-text-center amc-ellipsis-2-line"}],"css":"amc-align-center amc-justify-center"}],"css":"amc-v-box amc-justify-center amc-dlg-width"}],"css":"amc-dlg-box amc-v-box"}],"onkeydown":"onKeyDown();","css":"amc-body"}]},"format":"JSON","tplVersion":"5.3.1"}