{"time":"0001","tplId":"QUICKPAY@cashier-ebank-pay-flex","publishVersion":"150924","tag":"QUICKPAY","name":"cashier-ebank-pay-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","children":[{"text":"try{if(amc.fn.isString(amc.rpcData)){amc.rpcData=JSON.parse(amc.rpcData)}}catch(e){}var getTag=amc.fn.getById;var rpc=amc.rpcData;var show=amc.fn.show;var hide=amc.fn.hide;var gifTag=null;var successTxt=rpc.successText||\"{{pay_ok}}\";var loadingBlueGif=amc.path+\"alipay_msp_loading_blue.gif\";var successBlueNorepeatGif=amc.path+\"alipay_msp_success_blue.gif\";var PAY_SUCCESS_CODE=\"0001\";var PAY_FAILURE_CODE=\"0002\";var needHandleEbankReturn=true;function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var a=amc.fn.isObject(rpc.backAct)?amc.res.arrowLeft:amc.res.close;var b=amc.fn.iNav(a,rpc.title||\"{{ebank_pay_result}}\",null,null,onBack,null,null,rpc.subtitle);getTag(\"body\").insertBefore(b,getTag(\"titleLine\"));getTag(\"secureLogo\").src=amc.path+\"alipay_msp_secure_logo\";if(rpc.info){getTag(\"info\").innerText=rpc.info}if(rpc.successBtn&&rpc.successBtn.text){getTag(\"paySuccessBtn\").innerText=rpc.successBtn.text}if(rpc.switchChannelBtn&&rpc.switchChannelBtn.text){getTag(\"otherChannelBtn\").innerText=rpc.switchChannelBtn.text}gifTag=getTag(\"pwdLoadGif\");registerNotification()}function registerNotification(){var a={callbacks:{onNotify:\"navtiveNotifyCallback\"}};getTag(\"notification\").src=JSON.stringify(a)}function onPayComplete(){needHandleEbankReturn=false;var a={action:(rpc.successBtn&&rpc.successBtn.act)||{name:\"/cashier/payResultQuery\"}};a.action.loadtxt=\"\";document.asyncSubmit(a,function(b){b=b||{};if(b.pageloading===\"0\"&&gifTag.src===loadingBlueGif){hide(\"pwdLoad\")}else{if(b.pageloading===\"1\"){show(\"pwdLoad\")}}if(b.status===PAY_SUCCESS_CODE){showSuccessAnimation(b.successText)}else{if(b.status===PAY_FAILURE_CODE){}}});startLargeLoading(rpc.loadingText)}function onOtherPay(){needHandleEbankReturn=false;var a={action:(rpc.switchChannelBtn&&rpc.switchChannelBtn.act)||{name:\"/cashier/switchChannel\"}};a.action.loadtxt=\"\";document.asyncSubmit(a,function(b){amc.fn.shouldShowBtnIndicator(b,\"otherChannelBtn\",\"otherLoading\")});amc.fn.shouldShowBtnIndicator({pageloading:\"1\"},\"otherChannelBtn\",\"otherLoading\")}function startLargeLoading(a){hide(\"mainContent\");show(\"pwdLoad\");gifTag.src=loadingBlueGif;if(a){getTag(\"loadTxt\").innerText=a}}function stopLargeLoading(){hide(\"pwdLoad\");show(\"mainContent\")}function showSuccessAnimation(a){getTag(\"loadTxt\").innerText=a||successTxt;gifTag.src=successBlueNorepeatGif;show(\"pwdLoad\")}function navtiveNotifyCallback(c){if(!c){return}var b={};try{b=JSON.parse(c)||{}}catch(d){amc.fn.logError(\"EBANK\",\"native回调参数解析错误, \"+d);return}var a=b.notifyName;if(a==\"EBANK_RETURN\"){handleEbankReturn(b)}}function handleEbankReturn(b){if(!needHandleEbankReturn){return}b=b||{};var a=b.epayStatus||\"U\";if(a===\"Y\"||a===\"N\"){onPayComplete()}}function onBack(){if(rpc.backAct){document.submit(rpc.backAct)}else{amc.fn.exit()}}function onKeyDown(){if(event.which==4){onBack()}};","tag":"text"}]},{"tag":"style","children":[{"text":".logo-box {\n        padding-top: 45px;\n    }\n    \n    .secure-logo {\n        height: 61px;\n        width: 54px;\n    }\n    \n    .info-text {\n        font-size: 16px;\n        color: #000;\n    }\n    \n    .info-box {\n        padding: 15px;\n    }\n    \n    .btn-box {\n        padding-top: 45px;\n    }\n    \n    .btn-margin {\n        height: 30px;\n    }\n    \n    .btn-secondary {\n        background-color: #fff;\n        color: #000;\n        height: 41px;\n        max-height: 41px;\n        min-height: 41px;\n        border: 1PX #dddddd solid;\n        border-radius: 4px;\n        font-size: 20px;\n    }\n    \n    .btn-secondary:active {\n        background-color: #f8f8f8;\n        color: #000;\n    }\n    \n    .btn-primary {\n        background-color: #108ee9;\n        border: 0;\n        border-radius: 4px;\n        color: #fff;\n        font-size: 18px;\n        height: 41px;\n        max-height: 41px;\n        min-height: 41px;\n        flex: 1.0;\n    }\n    \n    .btn-primary:active {\n        background-color: #1284D6;\n        color: #fff;\n    }\n    \n    .pd-t-l {\n        padding-top: 20px;\n    }\n    \n    .stretch-self {\n        align-self: stretch;\n    }\n    \n    .pd-lr {\n        padding-left: 15px;\n        padding-right: 15px;\n    }\n    \n    .font-l-white {\n        font-size: 17px;\n        color: #000;\n    }\n    \n    .loading-box {\n        padding-top: 20px;\n    }","tag":"text"}]}]},{"id":"body","onload":"init()","tag":"body","children":[{"id":"titleLine","tag":"div","css":"amc-1px-title-line"},{},{"id":"mainContent","tag":"div","children":[{"tag":"div","children":[{"id":"secureLogo","tag":"img","css":"secure-logo"}],"css":"amc-justify-center logo-box"},{"tag":"div","children":[{"id":"info","tag":"label","children":[{"text":"{{pay_in_ebank}}","tag":"text"}],"css":"info-text amc-flex-1 amc-text-center amc-ellipsis-2-line"}],"css":"info-box amc-justify-center"},{"tag":"div","children":[{"tag":"div","children":[{"id":"paySuccessBtn","tag":"button","children":[{"text":"{{ebank_pay_complete}}","tag":"text"}],"onclick":"onPayComplete()","css":"btn-primary amc-flex-1"}],"css":"btn-primary amc-justify-center amc-align-center"},{"tag":"div","css":"btn-margin"},{"tag":"div","children":[{"id":"otherLoading","tag":"img","src":"indicatior","css":"amc-loading-img amc-hidden"},{"id":"otherChannelBtn","tag":"button","children":[{"text":"{{change_pay_tool}}","tag":"text"}],"onclick":"onOtherPay()","css":"btn-secondary amc-flex-1"}],"css":"btn-secondary amc-justify-center amc-align-center"}],"css":"btn-box amc-v-box"}],"css":"amc-pd-lr amc-v-box amc-flex-1"},{},{"id":"pwdLoad","tag":"div","children":[{"tag":"div","css":"amc-flex-space-1"},{"id":"pwdLoadGif","tag":"embed","type":"MQPPayGifView","css":"amc-load-img"},{"tag":"div","children":[{"id":"loadTxt","tag":"label","children":[{"text":"{{ebank_loading}}","tag":"text"}],"css":"font-l-white amc-flex-1 amc-text-center amc-ellipsis-2-line"}],"css":"pd-t-l stretch-self pd-lr"},{"tag":"div","css":"amc-flex-space-2"}],"css":"amc-loading-box amc-hidden loading-box"},{"id":"notification","tag":"embed","type":"MQPBNNotification","css":"amc-hidden"}],"onkeydown":"onKeyDown()","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.2.7"}