{"time":"0007","tplId":"QUICKPAY@frontpay-channel-logo-flex","publishVersion":"150924","tag":"QUICKPAY","name":"frontpay-channel-logo-flex","data":{"tag":"html","children":[{"tag":"head","children":[{"tag":"meta","src":"AlipaySDK.bundle/amc.i18n","type":"i18n"},{"tag":"link","rel":"stylesheet","href":"AlipaySDK.bundle/amc.css"},{"tag":"script","src":"AlipaySDK.bundle/amc.js"},{"tag":"script","children":[{"text":"var getTag=amc.fn.getById;var show=amc.fn.show;var hide=amc.fn.hide;var create=amc.fn.create;var rpc=amc.rpcData;var path=amc.path+\"alipay_msp_\";var gouPng=path+\"gou\";var addCardAction=\"/frontpay/newCard\";var nextAction=\"loc:returnData\";var helpQuery=rpc.helpQuery||\"\";var helpUrl=rpc.helpUrl||\"\";amc.fn.spmPageCreate(\"a283.b4037\",{scene:rpc.bizType===\"deposit\"?\"deposit\":\"front\"});function createPaymentItem(p,g){var r=getTag(\"channel\");var b=create(\"div\");b.className=\"channel-item\";var h;var d=create(\"img\");if(p.new_card){p.usable=true;p.logo=amc.path+\"alipay_msp_add_card\"}if(p.logo){if(p.logo.indexOf(\"local:\")===0){d.src=amc.path+p.logo.substr(\"local:\".length)}else{d.src=p.logo}d.defaultvalue=path+\"bank_logo\";d.failurevalue=path+\"bank_logo\";d.className=\"channel-logo\";b.appendChild(d);if(!p.usable){d.style.cssText=\"opacity:0.5\"}}var f=create(\"div\",\"amc-item-m-box\",b);var m=create(\"div\",\"amc-v-box amc-flex-1\",f);var c=create(\"div\",\"\",m);var l=create(\"label\",\"channel-name amc-ellipsis\",c);var e=max(calculateFontWidth(p.tail)*16,62);if(p.new_card){l.style.maxWidth=window.innerWidth-96}else{l.style.maxWidth=window.innerWidth-96-e}l.innerText=p.name||\"\";var o=create(\"label\",\"channel-name amc-ellipsis\",c);o.style.maxWidth=e;o.innerText=p.tail||\"\";var q;var j=false;if(p.available){q=p.available_title;j=true}if(!p.usable){l.style.color=\"#777\";o.style.color=\"#777\";if(p.close_msg){q=p.close_msg}else{if(p.available_title){q=p.available_title}}j=true;b.disabled=true}else{b.onclick=function(){var t={action:{name:nextAction}};if(p.new_card){t.action[\"name\"]=addCardAction}else{if(rpc.bizType===\"deposit\"){t.action[\"name\"]=\"loc:reload;loc:back\"}}if(rpc.bizType===\"deposit\"){var v={};v.index=g;v.logo=(d&&d.src)||\"\";var u=p.value;if(u){v.limit=u.availableAmount||\"\";v.channel=u.assignedChannel||\"\";v.name=u.channelName;var s=u.cardInfo;if(s){v.tail=s.cardNo}t.param=v}document.submit(t)}else{t.action[\"loadtxt\"]=\"\";submit_obj={};submit_obj.resultStatus=p.end_code;submit_obj.result=toString(p.value);submit_obj.memo=\"\";t.action[\"params\"]=submit_obj;document.asyncSubmit(t,function(w){if(w.pageloading===\"1\"){hide(k);show(h)}else{if(w.pageloading===\"0\"){hide(h);show(k)}}})}hide(k);show(h);amc.fn.spmClick(\"a283.b4037.c9697.d17387\")};b.className+=\" amc-press-box\"}if(j){var n=create(\"label\",\"channel-detail amc-ellipsis-2-line\",m);n.innerText=q||\"\";if(p.close_msg&&p.detailAction){b.disabled=false;n.style.cssText=\"color:#777; flex:1.0;white-space: wrap;\";m.onclick=function(){var s={action:{name:p.detailAction,loadtxt:\"\"}};document.submit(s)}}}var k=create(\"img\",\"\",b);k.style.marginLeft=\"0px\";if(p.checked){k.src=gouPng}if(p.new_card||p.type==\"appBank\"){k.src=amc.res.arrowRight}h=create(\"img\",\"amc-hidden\",b);h.src=\"indicatior\";var a=create(\"div\");if(g<rpc.channels.length-1){a.className=\"pd-l\"}var i=create(\"div\",\"amc-1px-line amc-flex-1\",a);r.appendChild(b);r.appendChild(a)}function init(){try{initUI();if(amc.fn.logPageInit){amc.fn.logPageInit(true)}}catch(a){if(amc.fn.logPageInit){amc.fn.logPageInit()}}}function initUI(){var d=rpc.setting?\"{{setting}}\":null;var a;if(rpc.showLogo){a=amc.path+\"alipay_msp_i_logo\"}var f=amc.fn.iNav(amc.res.close,rpc.title||\"{{sel_pay_tool}}\",null,amc.res.help,onClose,onHelp,a,rpc.subtitle);getTag(\"body\").insertBefore(f,getTag(\"iLine\"));amc.fn.spmExposure(\"a283.b4037.c9697.d24460\");amc.fn.spmExposure(\"a283.b4037.c9697.d24459\");getTag(\"iNavImgR\")&&(getTag(\"iNavImgR\").alt=\"{{help}}\");if(getTag(\"iNavBoxR\")&&getTag(\"iNavBoxL\")){getTag(\"iNavBoxR\").style.width=amc.isPlus?85:75;getTag(\"iNavBoxL\").style.width=amc.isPlus?85:75}getTag(\"iNavImgM\")&&(getTag(\"iNavImgM\").alt=\"{{alipay}}\");if(rpc.subScene===\"inside\"){getTag(\"body\").style.opacity=\"1\"}if(rpc.err){amc.fn.show(\"errMsgBox\");getTag(\"errMsg\").innerText=rpc.err}else{if(rpc.tips){amc.fn.show(\"tipsBox\");getTag(\"tips\").innerText=rpc.tips}}if(rpc.bizType===\"deposit\"){addCardAction=\"loc:back;/setting/addCard\";nextAction=\"loc:back;/deposit/channelChoosed\"}for(var b=0;b<rpc.channels.length;b++){createPaymentItem(rpc.channels[b],b)}var e=rpc.newCardChannel;if(e&&e.usable){var c={};c.new_card=true;c.usable=true;c.name=rpc.newCardChannel.name;c.tail=\"\";createPaymentItem(c,-1)}}function calculateFontWidth(d){if(!d){return 0}var b=0;var c=/^[A-Za-z0-9\\.\\(\\)]*$/;for(var a=0;a<d.length;a++){if(c.test(d[a])){b+=0.45}else{b++}}return Math.round(b)}function max(d,c){return d>c?d:c}function addNewCard(){document.submit({action:{name:\"/frontpay/newCard\"}})}function onHelp(){var a=\"https://csmobile.alipay.com/router.htm?scene=app_paymentlist\";if(helpUrl){a=helpUrl}else{if(helpQuery){a=(helpQuery.indexOf(\"&\")===0)?a+helpQuery:a+\"&\"+helpQuery}}amc.fn.logCount(\"help\",\"front-chnl\");document.submit({action:{name:\"loc:openweb('\"+a+\"', '{{help}}')\"}});amc.fn.spmClick(\"a283.b4037.c9697.d24460\")}function onClose(){amc.fn.spmClick(\"a283.b4037.c9697.d24459\");amc.fn.spmPageDestroy(\"a283.b4037\");if(rpc.bizType===\"deposit\"){amc.fn.back()}else{amc.fn.exit()}}function onKeyDown(){if(event.which==4){onClose()}}function toString(a){if(a==undefined||a==null){return\"{}\"}if(typeof a==\"string\"){return a}else{if(typeof a==\"object\"){return JSON.stringify(a)}else{return a+\"\"}}};","tag":"text"}]},{"tag":"style","children":[{"text":".channel-item {\n    align-items: center;\n    padding: 10px 15px;\n    min-height: 60px;\n}\n\n.error-msg-box {\n    padding-top: 12px;\n    background-color:#ffeeee;\n}\n\n.error-msg {\n    font-size: 14px;\n    color:#f4333c;\n    text-align:left;\n    margin-bottom: 12px;\n}\n\n.pd-lr {\n    padding-left: 15px;\n    padding-right: 15px;\n}\n.margin-lr {\n    margin-left: 15px;\n    margin-right: 15px;\n}\n\n.channel-logo {\n    height: 24px;\n    width: 24px;\n    margin-right: 12px;\n}\n\n.channel-name {\n    font-size: 16px;\n    letter-spacing: 0px;\n    color: #000;\n\n    align-items: center;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.channel-detail {\n    margin-top: 3px;\n    font-size: 14px;\n    color: #777;\n}\n.pd-l {\n    padding-left: 15px;\n}\n\n.channel-tips-box {\n    padding-top: 12px;\n    background-color:#f5f5f5;\n}\n\n.channel-tips {\n    font-size: 14px;\n    color:#666;\n    text-align:left;\n    margin-bottom: 12px;\n}","tag":"text"}]}]},{"id":"body","onload":"init();","tag":"body","children":[{"id":"iLine","tag":"div","css":"amc-1px-title-line"},{"tag":"div","children":[{"id":"channel","tag":"div","children":[{"id":"errMsgBox","tag":"div","children":[{"id":"errMsg","tag":"label","css":"error-msg amc-flex-1 amc-ellipsis-2-line margin-lr"},{"tag":"div","css":"amc-adapt-line"}],"css":"error-msg-box amc-hidden amc-v-box"},{"id":"tipsBox","tag":"div","children":[{"id":"tips","tag":"label","css":"channel-tips amc-flex-1 amc-ellipsis-2-line margin-lr"},{"tag":"div","css":"amc-adapt-line"}],"css":"channel-tips-box amc-hidden amc-v-box"}],"css":"amc-v-box"},{"tag":"div","children":[{"tag":"div","css":"amc-1px-line"}],"css":"pd-lr"},{"tag":"div","css":"amc-iphone-x-pd-b"}],"css":"amc-column-flex-1 amc-scroll"}],"onkeydown":"onKeyDown();","css":"amc-i-body"}]},"format":"JSON","tplVersion":"5.2.9"}